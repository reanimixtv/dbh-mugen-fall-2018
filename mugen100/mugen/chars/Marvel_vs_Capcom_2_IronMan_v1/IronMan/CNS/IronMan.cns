; Constants and state file.
; There are comments scattered through this file, so you may like to
; take a look if would like to learn more about the cns.

[Data]
life = 1000			;Amount of life to start with
attack = 100		;attack power (more is stronger)
defence = 100		;defensive power (more is stronger)
fall.defence_up = 55	;Percentage to increase defense everytime player is knocked down
liedown.time = 22		;Time which player lies down for, before getting up
airjuggle = 99999		;Number of points for juggling
sparkno = 2			;Default hit spark number for HitDefs
;guard.sparkno = 40	;Default guard spark number
KO.echo = 0			;1 to enable echo on KO
volume = 250			;Volume offset (negative for softer)
IntPersistIndex = 60	;Variables with this index and above will not have their values
FloatPersistIndex = 40  ;reset to 0 between rounds or matches. There are 60 int variables,
  				;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
  				;If omitted, then it defaults to 60 and 40 for integer and float
  				;variables repectively, meaning that none are persistent, i.e. all
  				;are reset. If you want your variables to persist between matches,
  				;you need to override state 5900 from common1.cns.


[Size]
xscale = .83
yscale = 1.07 
ground.back = 21
ground.front = 21
air.back = 18
air.front = 18
height = 60
attack.dist = 160
proj.attack.dist = 90	;Default attack distance for projectiles
proj.doscale = 0		;Set to 1 to scale projectiles too   
head.pos = -5, -90	;Approximate position of head
mid.pos = -5, -60		;Approximate position of midsection
shadowoffset = 0		;Number of pixels to vertically offset the shadow
draw.offset = 0,0		;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 3		;Walk forward
walk.back = -2.5		;Walk backward
run.fwd  = 8.3, 0		;Run forward (x, y)
run.back = -8,0
jump.neu = 0,-12	;Neutral jumping velocity (x, y)
jump.back = -3.4		;Jump back Speed (x, y)
jump.fwd = 3.2		;Jump forward Speed (x, y)
runjump.back = -2.55,-8.1;Running jump speeds (opt)
runjump.fwd = 5,0
airjump.neu = 0,-8.1	;.
airjump.back = -2.55	;Air jump speeds (opt)
airjump.fwd = 3.5		;.

[Movement]
airjump.num = 0		;Number of air jumps allowed (opt)
airjump.height = 35	;Minimum distance from ground before you can air jump (opt)
yaccel = .65		;Vertical acceleration
stand.friction = .85	;Friction coefficient when standing
crouch.friction = .82	;Friction coefficient when crouching

;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...

[Statedef 21]
type    = S
physics = S
sprpriority = 1

; Just to prevent strange behaviors...
[State 21, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 21, 1]
type = VelSet
triggerall = enemy, stateno != [191, 192]
trigger1 = command = "holdfwd"
x = 1.6

[State 21, 2]
type = VelSet
triggerall = enemy, stateno != [191, 192]
trigger1 = command = "holdback"
x = -1.3

[State 21, 3]
type = VelSet
triggerall = enemy, stateno != [191, 192]
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
x = 0

[State 21, 4]
type = ChangeAnim
triggerall = Vel X > 0
trigger1 = command = "holdfwd" && anim != 22
value = 22

[State 21, 4]
type = ChangeAnim
triggerall = Vel X < 0
trigger1 = command = "holdback" && anim != 23
value = 23

[State 21, 4]
type = ChangeAnim
triggerall = Vel X = 0
trigger1 = command != "holdfwd" && anim != 0
trigger1 = command != "holdback" && anim != 0
value = 0

[State 21, 5]
type = ChangeState
trigger1 = ctrl
value = ifelse((command = "holdfwd") || (command = "holdback"), 22, 23)


;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State 180, ChangeState]
type = ChangeState
trigger1 = !numhelper(8500)
value = ifelse(winko,181+random%2,182)

; Win1 
[Statedef 181]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 181, PlaySnd]
type = PlaySnd
trigger1 = animelem = 20
value = 3500,0
volumescale = 220

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = time < 180
flag = roundnotover

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "start"
value = 0
ctrl = 1


; Win2 
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = 3500,0
volumescale = 220

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = time < 180
flag = roundnotover

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "start"
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[Statedef 190]
type = A
movetype = I
physics = S
ctrl = 0
anim = 190
velset = 0,0
poweradd = 1000

[State 190, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 190,0	

[State 200, PlaySnd]
type = PlaySnd
trigger1 = animelem = 66
value = 3000,0	

[State 240, Explod] 
type = Explod
trigger1 = animelem = 42
anim = 193
scale = .83,1.07 
pos = -18, -6
sprpriority = -1

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 191

;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[Statedef 191]
type = A
physics = N
ctrl = 0
anim = 192
sprpriority = 1

[State 194, 1] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 21280]
type = ScreenBound
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 20
value = 190,0
	
[State 190, 4] 
type = VelAdd
trigger1 = Time = 0
x = 0
y = -8

[state a]
type = veladd
trigger1 = Time = 3
y = 4.5

[State 240, Gravity] 
type = Gravity
trigger1 = Time >= 10

[State 240, Explod] 
type = Explod
trigger1 = Time = 0
anim = 191
scale = .83,1.07 
pos = 0, 0
sprpriority = -1

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = Pos Y >= -6
trigger1 = Vel Y > 0
value = 0

;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 0
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 195
trigger1 = Time = 0
value = 195

[State 195, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3500,0
volumescale = 233

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Punch
; CNS difficulty: easy
[Statedef 200]
type    = S				
movetype= A				
physics = S				
juggle  = 1							
ctrl = 0								
poweradd = 20			
sprpriority = 2
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 200
trigger1 = Time = 0
value = 200

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,3

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 210,0
volumescale = 222	

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1         

[State 200, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 8,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
guard.pausetime = 8,10
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .98
ground.velocity = -5.5,0
air.velocity = -9.5,-2
ground.cornerpush.veloff = -6.5
ground.velocity = -5.5,0
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1


[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 90)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Punch
; CNS difficulty: easy
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 210
trigger1 = Time = 0
value = 210

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 220,0
volumescale = 220

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 5
value = 0,4	

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 4
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 9,7
guard.pausetime = 10,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .98
ground.velocity = -11,0
ground.cornerpush.veloff = -13.5
air.velocity = -9.5,-3
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 78)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Punch
; CNS difficulty: easy
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 220
trigger1 = Time = 0
value = 220

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 250,1
volumescale = 220	

[State 220, Helper] 
type = Helper
trigger1 = Animelem = 5
pos = 33, -63
postype = p1 
Stateno = 225
facing = 1
scale = 1, 1
sprpriority = 7

[State 220, 3]
type = Explod
trigger1 = Animelem = 5
anim = 226
pos = 33, -63
postype = p1 
facing = 1
scale = .83,1.07 
sprpriority = 7

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1

[State 220, 5]
type = ChangeState
trigger1 = Animelem = 23
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Punch
; CNS difficulty: easy
[Statedef 225]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
anim = 225
sprpriority = 7
;hitcountpersist = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 220,1	

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S,NA
animtype = Hard
damage = 74
hitflag = MAF
guardflag = MA
pausetime = 0,18
guard.pausetime = 12,13
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,6
guardsound = S6,0
ground.type = High
ground.slidetime = 18
ground.hittime = 20
air.hittime = 3
yaccel = .99
ground.velocity = -16,-10
air.velocity = -16,-10
airguard.velocity = -7,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4+16
fall = 1

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 75)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 220, 8]
type = TargetState
trigger1 = MoveHit
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 226

[State 220, 5]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------
; Hit by SSP
[Statedef 226]
type    = A
movetype= H
physics = N
velset = 0,0

[State 225, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 222

[State 225, 2]
type = ChangeState
trigger1 = Time = 10
value = 227

;---------------------------------------------------------
; Hit by SSP - Flying
[Statedef 227]
type    = A
movetype= H
physics = N

[State 226, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 226, 2]
type = VelAdd
trigger1 = 1
y = 1.07

[State 226, 3]
type = Null;Explod
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
anim = 7000
persistent = 0
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 226, 4]
type = ChangeState
trigger1 = (Vel y > 0) && (Pos y >= 25)
trigger1 = alive
value = 228

[State 226, 5]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
trigger1 = alive = 0
value = 5100

;---------------------------------------------------------
; Hit by SSP - Recover
[Statedef 228]
type    = A
movetype= I
physics = N
anim = 5210

[State 227, 1]
type = VelSet
trigger1 = Time = 0
y = -3

[State 227, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = vel x > 0
x = 5

[State 227, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = vel x < 0
x = -5

[State 227, 4]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 227, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 227, 6]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 52
ctrl = 1



;---------------------------------------------------------------------------
; Standing Light Kick
; CNS difficulty: easy
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 22
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 230
trigger1 = Time = 0
value = 230

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,3

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1         


[State 200, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 8,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
guard.pausetime = 8,10
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .98
ground.velocity = -5.5,0
ground.cornerpush.veloff = -6.5
ground.velocity = -5.5,0
air.velocity = -9.5,-1
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 230, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Kick
; CNS difficulty: easy
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 60
ctrl = 0
;hitcountpersist = 1

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 210,0
volumescale = 222	

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1     

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 240
trigger1 = Time = 0
value = 240

[State 220, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S,NA
hitflag = MAF
guardflag = MA
animtype = Medium
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 9,7
guard.pausetime = 10,11
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-85
hitsound = S5,1
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .98
ground.velocity = -11,0
ground.cornerpush.veloff = -13.5
air.velocity = -9.5,-3
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 58)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 240, Explod] 
type = Explod
trigger1 = Animelem = 3
anim = 245
pos = 100, -54
postype = p1
scale = .83,1.07 
facing = 1
sprpriority = 3

[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 3
value = 500,1	

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Kick
; CNS difficulty: easy
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 60
ctrl = 0

[State 200, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

[State 200, Explod]
type = Explod
trigger1 = abs(vel x) > 1 && time % 3 = 0
anim = 8200
scale = 2,2
pos = -20,0
sprpriority = 4
ownpal = 1         

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 250
trigger1 = Time = 0
value = 250

[State 250, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = MA
pausetime = 9, 9
guard.pausetime = 12,10
damage = 45
animtype = up
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10, -74
hitsound = s5,2
guardsound = S6,0
ground.type = High
ground.velocity = 0, -18
air.velocity = 0, -17.5
guard.slidetime = 17
guard.hittime = 20
guard.velocity = -10
ground.cornerpush.veloff = 0
yaccel = .82
fall = 1
fall.recover = 0
id = 1+4
givepower = 50
getpower = 60

[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 85)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 240, Explod]
type = Explod
trigger1 = movehit
anim = 8020
ontop = 1
pos = 45,-60
supermove = 1
ignorehitpause = 1
persistent = 0
scale = 1.1,1.0
ownpal = 1

[State 250, Explod] 
type = Explod
trigger1 = Animelem = 4
anim = 252
pos = 0, 0
;*const(size.xscale),*const(size.yscale)
sprpriority = 3
bindtime = -1
scale = .83,1.07 

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 4
value = 500,1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 2
value = 220,0
volumescale = 222	

[State 250, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Light Punch
; CNS difficulty: easy
; Description: Simple crouching attack. The HitDef's guardflag parameter
;     is set to "L", meaning that the move can only be guarded low
;     (crouching), and not by standing or jumping opponents.
;     Like for all light attacks, it's a good idea to keep the slidetime
;     and hittime parameters at a smaller number, so the opponent isn't
;     stunned for too long. For all crouching attacks you have to
;     remember to set the attr parameter to indicate that it is crouching
;     attack. In this case, "C, NA" stands for "crouching, normal attack".
;     The HitDef's priority is set at 3, instead of the default of 4,
;     so this attack has a lower priority than most others, meaning the
;     player will get hit instead of trading hits with the opponent if
;     their attack collision boxes (Clsn1) intersect each other's Clsn2
;     boxes at the same time.
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 20
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 400
trigger1 = Time = 0
value = 400

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,3

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 210,0
volumescale = 222	

[State 200, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = C,NA
hitflag = MAF
guardflag = MA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 8,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-55
guard.pausetime = 8,10
hitsound = S5,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .98
air.velocity = -9.5,-1
ground.velocity = -5.5,0
ground.cornerpush.veloff = -6.5
ground.velocity = -5.5,0
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 40)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 400, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 50
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 410
trigger1 = Time = 0
value = 410

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,4

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 220,0
volumescale = 222	

[State 220, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = MA
pausetime = 8, 8
guard.pausetime = 12,10
damage = 45
animtype = up
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10, -74
hitsound = s5,1
guardsound = S6,0
ground.type = Low
ground.velocity = 0, -10
air.velocity = 0, -9.5
guard.slidetime = 17
guard.hittime = 20
guard.velocity = -10
ground.cornerpush.veloff = 0
yaccel = .92
fall = 1
fall.recover = 0
id = 1+4
givepower = 50
getpower = 60

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 65)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 410, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Strong Punch
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 50
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 420
trigger1 = Time = 0
value = 420

[State 220, Helper] 
type = Helper
trigger1 = Animelem = 6
pos = 40, -55
Stateno = 425
scale = 1, 1
sprpriority = 3

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 6
value = 420,0

[State 420, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Strong Punch (missle)
[Statedef 425]
type    = A
movetype= A
juggle  = 6
poweradd= 50
ctrl = 0
hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 425
trigger1 = Time = 0
value = 425

[state 40, 4]
type = VelSet
trigger1 = Time = 0
x = 4

[state 40, 4]
type = VelSet
trigger1 = Time > 6
x = 9

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = C,NA
hitflag = MAF
guardflag = MA
animtype = Hard
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 0,7
guard.pausetime = 0,7
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .88
ground.velocity = -16,0
ground.cornerpush.veloff = 0
air.velocity = -7,-1
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
fall.recover = 0
id = 2+4+16

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 58)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 1000, 3]
type = Explod
trigger1 = MoveContact
anim = 8080
postype = p2
pos = 5,-45
ownpal = 1
sprpriority = 6
scale = 1.6,1.6

[State 1000, 6]
type = PlaySnd
trigger1 = MoveContact
value = 6,1
volumescale = 255

[State 1000, 3]
type = Explod
trigger1 = MoveGuarded
anim = 8080
postype = p2
pos = 5,-45
ownpal = 1
sprpriority = 6
scale = 1.6,1.6

[State 1000, 6]
type = PlaySnd
trigger1 = MoveGuarded
value = 6,1
volumescale = 255

[State 420, 5]
type = ChangeState
trigger1 = FrontEdgeDist<-90 || BackEdgeDist<-90
trigger2 = movecontact
value = 1102

;---------------------------------------------------------------------------
; Crouching Light Kick
; CNS difficulty: easy
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 22
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 430
trigger1 = Time = 0
value = 430

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,3

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 210,0
volumescale = 222	

[State 200, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = C,NA
hitflag = MAFD
guardflag = LA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 9,8
guard.pausetime = 9,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-5
hitsound = S5,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
yaccel = .88
ground.velocity = -6.5,0
air.velocity = -9.5,-3
airguard.velocity = -6,-2
ground.cornerpush.veloff = -6.5
down.velocity = -4,-6
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), Floor(P2Dist Y - 10)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 430, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Kick
; CNS difficulty: easy
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 50
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 440
trigger1 = Time = 0
value = 440

[State 440, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 220,0
volumescale = 220

[State 440, Velset]
type = VelSet
trigger1 = animelem = 4
x = 5

[State 440, Velset]
type = VelSet
trigger1 = animelem = 8
x = 0

[State 220, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = C,NA
hitflag  = MAFD
guardflag = LA
animtype = Hard
damage = 55,0
getpower = 30,0
givepower = 20,0
pausetime = 9,8
guard.pausetime = 9,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-5
hitsound = S5,1
guardsound = S6,0
ground.type = Trip
ground.slidetime = 8
ground.hittime = 10
air.hittime = 8
guard.hittime = 17
yaccel = .73
ground.velocity = 0,-4
ground.cornerpush.veloff = 0
air.velocity = -9.5,-3
guard.velocity = -10
airguard.velocity = -6,-2
down.velocity = -4,-6
fall.xvelocity = 0
fall.yvelocity = -2
fall = 1
fall.recovertime = 0
id = 4

[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 15)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 440, Explod] 
type = Explod
trigger1 = Animelem = 5
anim = 445
pos = 75, 0
facing = 1
scale = .83,1.07 
sprpriority = 3

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 5
value = 500,1	

[State 440, 5]
type = ChangeState
trigger1 = Animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Strong Kick
; CNS difficulty: easy
; Description: This move uses "Trip" for the "ground.type" parameter in
;     its HitDef. It's a special type that puts the opponent in a tripped
;     animation as he falls. Also, the hitflag parameter in the HitDef
;     is set to "MAFD". The "D" indicates that a downed opponent can be
;     hit by the attack.
[Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 56
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 450
trigger1 = Time = 0
value = 450

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 1
value = 250,1
volumescale = 220

[State 250, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = C,NA
hitflag = MA
guardflag = LA
animtype = hard
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 8,7
guard.pausetime = 9,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-5
hitsound = S5,6
guardsound = S6,0
ground.type = Low
ground.slidetime = 13
ground.hittime = 15
air.hittime = 12
yaccel = .88
ground.velocity = -7,-8
air.velocity = -4,-8
airguard.velocity = -6,-2
ground.cornerpush.veloff = 0
down.velocity = -4,-6
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1

[State 250, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = C,NA
hitflag = MAF
guardflag = LA
animtype = hard
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 11,18
guard.pausetime = 12,13
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,6
guardsound = S6,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 20
air.hittime = 3
yaccel = 1.39
ground.velocity = -11,-5
air.velocity = -11,-5
ground.cornerpush.veloff = -23.5
airguard.velocity = -7,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 2+4+16
fall = 1

[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 220, 8]
type = TargetState
trigger1 = MoveContact && AnimElem = 5, >= 0
trigger1 = NumTarget != 0
trigger1 = target, stateno = [5000,5030]
ignorehitpause = 1
value = 456

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact && AnimElemNo(0) = 4
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 45)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact && AnimElem = 5, >= 0
trigger1 = MoveHit
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X), Floor(P2Dist Y - 85)
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 220, 3]
type = Explod
trigger1 = Animelem = 5
anim = 455
facing = 1
scale = .83,1.07 
sprpriority = 7

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 5
value = 500,1	

[State 450, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------
; Hit by SSK
[Statedef 456]
type    = A
movetype= H
physics = N
velset = 0,0

[State 225, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 222

[State 225, 2]
type = ChangeState
trigger1 = Time = 10
value = 457


;---------------------------------------------------------
; Hit by SSK - Flying
[Statedef 457]
type    = A
movetype= H
physics = N

[State 226, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 226, 2]
type = VelAdd
trigger1 = 1
y = 1.07

[State 226, 3]
type = Null;Explod
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
anim = 7000
persistent = 0
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 226, 4]
type = ChangeState
trigger1 = (Vel y > 0) && (Pos y >= 25)
trigger1 = alive
value = 458

[State 226, 5]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
trigger1 = alive = 0
value = 5100

;---------------------------------------------------------
; Hit by SSP - Recover
[Statedef 458]
type    = A
movetype= I
physics = N
anim = 5210

[State 227, 1]
type = VelSet
trigger1 = Time = 0
y = -3

[State 227, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = vel x > 0
x = 5

[State 227, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = vel x < 0
x = -5

[State 227, 4]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 227, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 227, 6]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 52
ctrl = 1


;---------------------------------------------------------------------------
; Jump Light Punch
; CNS difficulty: easy
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 21
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 600
trigger1 = Time = 0
value = 600

[State 117, 1]
type = VelSet
trigger1 = var(12) > 0
x = 0
y = 0

[State vel]
type = velset
trigger1 = var(6) = 1
;trigger1 = movecontact
;trigger1 = time = 3
trigger1 = pos Y >-39
;x = 0
y = 3

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 210,0
volumescale = 255

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,3		

[State 200, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-40
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = .92
ground.velocity = -6.5,0
ground.cornerpush.veloff = -7
air.cornerpush.veloff = 0
air.velocity = -0.5,-8.8
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 600, 5]
type = ChangeState
trigger1 = var(12) = 0
trigger1 = Animtime = 0
trigger2 = var(12) > 0
trigger2 = command = "Fly"
value = 49
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Jump Medium Punch
; CNS difficulty: easy
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 56
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 610
trigger1 = Time = 0
value = 610

[State 117, 1]
type = VelSet
trigger1 = var(12) > 0
x = 0
y = 0

[State vel]
type = velset
trigger1 = var(6) = 1
;trigger1 = movecontact
;trigger1 = time = 3
trigger1 = pos Y >-39
;x = 0
y = 3

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,800)
trigger1 = target,statetype = A
var(49) = 1

[State 220, 2]
type = HitDef
trigger1 = Time = 0
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Medium
air.animtype = Up
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 9,9
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,1
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 12
air.hittime = 12
yaccel = .92
ground.velocity = -12,0
ground.cornerpush.veloff = -9
air.cornerpush.veloff = 0
air.velocity = -0.5,-5
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
 
[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 240, Explod] 
type = Explod
trigger1 = Animelem = 2
anim = 615
pos = 18, -84
facing = 1
scale = .83,1.07 
bindtime = 20
sprpriority = 5
id = 610


[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 3
value = 500,1
channel = 8	

[State 600, 5]
type = ChangeState
trigger1 = var(12) = 0
trigger1 = Animtime = 0
trigger2 = var(12) > 0
trigger2 = command = "Fly"
value = 49
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Jump Strong Punch
; CNS difficulty: easy
[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 56
ctrl = 0


[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 620
trigger1 = Time = 0
value = 620

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 3
value = 220,0
volumescale = 220

[State vel]
type = velset
trigger1 = var(6) = 1
;trigger1 = movecontact
;trigger1 = time = 3
trigger1 = pos Y >-39
;x = 0
y = 3

[State 117, 1]
type = VelSet
trigger1 = var(12) > 0
x = 0
y = 0

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(49)
trigger1 = var(18) > 1 && var(19) > 0
var(49) = 1

[State 250, 3]
type = HitDef
triggerall = !var(49)
trigger1 = time = 0
attr = A,NA
hitflag = MAFD
guardflag = MA
animtype = Back
damage = 75,0
getpower = 50,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .78
ground.velocity = -16,0
ground.cornerpush.veloff = -12.5
air.cornerpush.veloff = 0
air.velocity = -14,6
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 250, 3]
type = HitDef
triggerall = var(49)
trigger1 = time = 0
attr = A,NA
hitflag = MAFD
guardflag = MA
animtype = Back
damage = 75,0
getpower = 50,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .78
ground.velocity = -16,0
ground.cornerpush.veloff = -12.5
air.cornerpush.veloff = 0
air.velocity = -14,6
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 4+64
fall.envshake.time = 10

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 240, Explod] 
type = Explod
trigger1 = Animelem = 3
anim = 625
id = 620
facing = 1
scale = .83,1.07 
bindtime = 20
sprpriority = 5

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 3
value = 500,1
channel = 7

[State 600, 5]
type = ChangeState
trigger1 = var(12) = 0
trigger1 = Animtime = 0
trigger2 = var(12) > 0
trigger2 = command = "Fly"
value = 49
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Jump Strong Punch (Upward)
; CNS difficulty: easy
[Statedef 621]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 56
ctrl = 0

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 621
trigger1 = Time = 0
value = 621

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 3
value = 220,0
volumescale = 220

[State vel]
type = velset
trigger1 = var(6) = 1
;trigger1 = movecontact
;trigger1 = time = 3
trigger1 = pos Y >-39
;x = 0
y = 3

[State 117, 1]
type = VelSet
trigger1 = var(12) > 0
x = 0
y = 0

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Hard
air.animtype = back
damage = 75,0
getpower = 30,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,2
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 12
air.hittime = 19
yaccel = .92
ground.velocity = -12,0
ground.cornerpush.veloff = -9
air.cornerpush.veloff = 0
air.velocity = -0.5,-7
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recovertime = 8
id = 1

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 3
value = 500,1
channel = 9

[State 240, Explod] 
type = Explod
trigger1 = Animelem = 3
anim = 626
id = 626
facing = 1
scale = .83,1.07 
bindtime = 20
sprpriority = 5

[State 600, 5]
type = ChangeState
triggerall = var(12) = 0
trigger1 = Animtime = 0
value = 49
ctrl = 1

[State 600, 5]
type = ChangeState
trigger1 = var(12) > 0
trigger1 = Animtime = 0
trigger2 = var(12) > 0
trigger2 = command = "Fly"
value = 731
ctrl = 1


;---------------------------------------------------------------------------
; Jump Strong Punch (Downward)
; CNS difficulty: easy
[Statedef 622]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 60
ctrl = 0

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 622
trigger1 = Time = 0
value = 622

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 3
value = 220,0
volumescale = 220

[State vel]
type = velset
trigger1 = var(6) = 1
;trigger1 = movecontact
;trigger1 = time = 3
trigger1 = pos Y >-39
;x = 0
y = 3

[State 117, 1]
type = VelSet
trigger1 = var(12) > 0
x = 0
y = 0

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(49)
trigger1 = var(18) > 1 && var(19) > 0
var(49) = 1

[State 250, 3]
type = HitDef
triggerall = !var(49)
trigger1 = time = 0
attr = A,NA
hitflag = MAFD
guardflag = MA
animtype = Back
damage = 75,0
getpower = 50,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .78
ground.velocity = -16,0
ground.cornerpush.veloff = -12.5
air.cornerpush.veloff = 0
air.velocity = -9,10
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 250, 3]
type = HitDef
triggerall = var(49)
trigger1 = time = 0
attr = A,NA
hitflag = MAFD
guardflag = MA
animtype = Back
damage = 75,0
getpower = 50,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .78
ground.velocity = -16,0
ground.cornerpush.veloff = -12.5
air.cornerpush.veloff = 0
air.velocity = -9,10
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 4+64
fall.envshake.time = 10

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 240, Explod] 
type = Explod
trigger1 = Animelem = 3
anim = 627
id = 627
facing = 1
scale = .83,1.07 
bindtime = 20
sprpriority = 5

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 3
value = 500,1
channel = 10

[State 600, 5]
type = ChangeState
triggerall = var(12) = 0
trigger1 = Animtime = 0
value = 49
ctrl = 1

[State 600, 5]
type = ChangeState
trigger1 = var(12) > 0
trigger1 = Animtime = 0
trigger2 = var(12) > 0
trigger2 = command = "Fly"
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Jump Light Kick
; CNS difficulty: easy
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 20
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 630
trigger1 = Time = 0
value = 630

[State vel]
type = velset
trigger1 = var(6) = 1
;trigger1 = movecontact
;trigger1 = time = 3
trigger1 = pos Y >-39
;x = 0
y = 3

[State 117, 1]
type = VelSet
trigger1 = var(12) > 0
x = 0
y = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 210,0
volumescale = 255

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,3		

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,800)
trigger1 = target,statetype = A
var(49) = 1

[State 200, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A,NA
hitflag = MAF
guardflag = HA
animtype = Light
damage = 20,0
getpower = 20,0
givepower = 20,0
pausetime = 8,8
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-40
hitsound = S5,0
guardsound = S6,0
ground.type = High
ground.slidetime = 8
ground.hittime = 10
air.hittime = 12
yaccel = .92
ground.velocity = -6.5,0
ground.cornerpush.veloff = -7
air.cornerpush.veloff = 0
air.velocity = -0.5,-12.5
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
p2facing = 1

[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8000, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 600, 5]
type = ChangeState
trigger1 = var(12) = 0
trigger1 = Animtime = 0
trigger2 = var(12) > 0
trigger2 = command = "Fly"
value = 49
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Jump Medium Kick
; CNS difficulty: easy
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 56
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 640
trigger1 = Time = 0
value = 640

[State vel]
type = velset
trigger1 = var(6) = 1
;trigger1 = movecontact
;trigger1 = time = 3
trigger1 = pos Y >-39
;x = 0
y = 3

[State 117, 1]
type = VelSet
trigger1 = var(12) > 0
x = 0
y = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 210,0
volumescale = 255

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,4

[State 610, VarSet]
type = VarSet
trigger1 = numtarget && prevstateno = [600,800)
trigger1 = target,statetype = A
var(49) = 1

[State 220, 2]
type = HitDef
trigger1 = animelem = 3
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Medium
air.animtype = back
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 9,8
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,1
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 12
air.hittime = 19
yaccel = .92
ground.velocity = -12,0
ground.cornerpush.veloff = -9
air.cornerpush.veloff = 0
air.velocity = -5,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recovertime = 8
id = 1

[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0
 
[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 600, 5]
type = ChangeState
trigger1 = var(12) = 0
trigger1 = Animtime = 0
trigger2 = var(12) > 0
trigger2 = command = "Fly"
value = 49
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Rocket Knee Dive
[Statedef 645]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 645
trigger1 = Time = 0
value = 645

[State 180, Varset]
type = VarSet
trigger1 = var(12) > 0
var(12) = 0

[state 700, 2]
type = PlaySnd
trigger1 = time = 1
value = 40,0
channel = 1
volumescale = 44

[State 635, 2]
type = VelSet
trigger1 = animelem = 2
x = 6
y = 10

[State 635, 2]
type = VelSet
trigger1 = animelem = 1
x = 0
y = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 220,0
volumescale = 255

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,4

[State 220, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
getpower = 20
animtype = Medium
guardflag = HA
hitflag = MAF
damage = 35,0
getpower = 30,0
givepower = 20,0
pausetime = 12,12
guard.pausetime = 9,9
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,1
guardsound = S6,0
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime = 12
air.hittime = 12
yaccel = .92
ground.velocity = -12,0
ground.cornerpush.veloff = -9
air.cornerpush.veloff = 0
air.velocity = -2,-2
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall.recover = 0
id = 1
 
[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8001, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -20
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 600, 5]
type = ChangeState
trigger1 = MoveContact
value = 646
ctrl = 0

[State 600, 5]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52
ctrl = 0

;---------------------------------------------------------------------------
; Rocket Knee Dive (Hit)
[Statedef 646]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 65
velset = -3, -5

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 646
trigger1 = Time = 0
value = 646

[State 600, 5]
type = ChangeState
trigger1 = Animtime = 0
value = 49
ctrl = 0

;---------------------------------------------------------------------------
; Jump Strong Kick
; CNS difficulty: easy
[Statedef 650]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 56
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 650
trigger1 = Time = 0
value = 650

[State 117, 1]
type = VelSet
trigger1 = var(12) > 0
x = 0
y = 0

[State vel]
type = velset
trigger1 = var(6) = 1
;trigger1 = movecontact
;trigger1 = time = 3
trigger1 = pos Y >-39
;x = 0
y = 3

[State 650, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 250,1
volumescale = 220	

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,5

[State 620, VarSet]
type = VarSet
trigger1 = time = 0 && !var(49)
trigger1 = var(18) > 1 && var(19) > 0
var(49) = 1

[State 250, 3]
type = HitDef
triggerall = !var(49)
trigger1 = time = 0
attr = A,NA
hitflag = MAFD
guardflag = MA
animtype = Back
damage = 75,0
getpower = 50,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .78
ground.velocity = -16,0
ground.cornerpush.veloff = -12.5
air.cornerpush.veloff = 0
air.velocity = -9,10
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 2+4

[State 250, 3]
type = HitDef
triggerall = var(49)
trigger1 = time = 0
attr = A,NA
hitflag = MAFD
guardflag = MA
animtype = Back
damage = 75,0
getpower = 50,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-45
hitsound = S5,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 14
air.hittime = 12
yaccel = .78
ground.velocity = -16,0
ground.cornerpush.veloff = -12.5
air.cornerpush.veloff = 0
air.velocity = -9,10
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -3
air.fall = 1
fall.recover = 0
id = 4+64
fall.envshake.time = 10

[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -35
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 600, 5]
type = ChangeState
trigger1 = var(12) = 0
trigger1 = Animtime = 0
trigger2 = var(12) > 0
trigger2 = command = "Fly"
value = 49
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Jump Strong Kick (Upward)
; CNS difficulty: easy
[Statedef 655]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 70
ctrl = 0
;hitcountpersist = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 655
trigger1 = Time = 0
value = 655

[State vel]
type = velset
trigger1 = var(6) = 1
;trigger1 = movecontact
;trigger1 = time = 3
trigger1 = pos Y >-39
;x = 0
y = 3

[State 117, 1]
type = VelSet
trigger1 = var(12) > 0
x = 0
y = 0

[State 650, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 250,1
volumescale = 220	

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 0,5

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = A,NA
hitflag = MAFD
guardflag = HA
animtype = Hard
air.animtype = Up
damage = 75,0
getpower = 30,0
givepower = 20,0
pausetime = 8,9
guard.pausetime = 10,10
sparkno = S9999
guard.sparkno = S8050
sparkxy = -10,-70
hitsound = S5,2
guardsound = S6,0
ground.type = High
air.type = High
air.hittime = 17
yaccel = .92
ground.velocity = 0, -10
guard.slidetime = 17
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.velocity = -0.5,-13
airguard.velocity = -6,-2
fall.xvelocity = 0
fall.yvelocity = -1
air.fall = 1
fall = 1
fall.recover = 0
id = 1+4

[State 200, VarAdd]
type = VarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State G-FX, Hit/Guard Spark]
type = Explod
trigger1 = MoveContact
anim = Cond(MoveHit, 8004, 32004)
postype = p1
pos = Floor(P2Dist X - 10), -65
bindtime = 1
removetime = -2
supermovetime = 500
scale = 0.5, 0.5
ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 600, 5]
type = ChangeState
trigger1 = var(12) = 0
trigger1 = Animtime = 0
trigger2 = var(12) > 0
trigger2 = command = "Fly"
value = 49
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Super Jump
[statedef 700]
type = S
physics = S
ctrl = 0
anim = 40

[state 700, 1]
type = VarSet
trigger1 = time = 0
sysvar(1) = 0

[state 700, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[state 700, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[state 700, 4]
type = VelSet
trigger1 = animtime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -20.5

[State 40, Explod]
type = Explod
trigger1 = animtime = -1
anim = 8250
id = 8250
pos = -130, 0
scale = 0.54,0.48
sprpriority = 4
supermove = 1
ownpal = 1

[state 700, 2]
type = PlaySnd
trigger1 = time = 0
value = 0,2
volumescale = 255

[state 700, 2]
type = PlaySnd
trigger1 = time = 1
value = 40,0
channel = 1

[state 700, 6]
type = changestate
trigger1 = animtime = 0
value = 701
ctrl = 1

;---------------------------------------------------------------------------
; Super Jump Up
[statedef 701]
type = A
physics = A
ctrl = 1
anim = 700

[State 50, 0]
type = Turn
trigger1 = p2dist X < -5


[State 1100, 0]
type = Null;ChangeAnim
trigger1 = Anim != 700
trigger1 = Time = 0
value = 700

[state 701, 1]
type = VarSet
trigger1 = time = 0
sysvar(1) = 0

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.17

[state 701, 5]
type = veladd
trigger1 = command = "holdback"
trigger1 = command != "holdfwd"
trigger1 = time >= 0
trigger1 = vel x <= 0
trigger1 = vel x > -2
x = -.07

[state 701, 5]
type = veladd
trigger1 = command = "holdfwd"
trigger1 = command !="holdback"
trigger1 = vel x < 5
trigger1 = time >= 0
x = .11

[state 701, 5]
type = VelSet
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = time >= 0
trigger1 = vel x = 0
x = 0

[State 180, Varset]
type = VarSet
trigger1 = 1
var(8) = 1

[State X, VelSet for Superjump]
type = VarSet
trigger1 = AnimElemNo(0) = 1
fvar(4) = -14

[State X, VelSet for Superjump]
type = VelSet
trigger1 = AnimElemNo(0) != 1
trigger1 = Time = 0
Y = FVar(4)

;---------------------------------------------------------------------------
; Super Jump 2
[statedef 702]
physics = S
type = S
ctrl = 0
anim = 40

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 40
trigger1 = Time = 0
value = 40

[state 700, 1]
type = VarSet
trigger1 = time = 0
sysvar(1) = 0

[state 700, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[state 700, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[state 700, 5]
type = VelSet
trigger1 = (animtime = 0) && (prevstateno = 100) && (sysvar(1) = 1)
x = const(velocity.runjump.fwd.x)

[state 700, 4]
type = VelSet
trigger1 = animtime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -20.5

[State 40, Explod]
type = Explod
trigger1 = animtime = -1
anim = 8250
id = 8250
pos = -130, 0
scale = 0.54,0.48
sprpriority = 4
supermove = 1
ownpal = 1

[state 700, 2]
type = PlaySnd
trigger1 = time = 0
value = 0,2
volumescale = 255

[state 700, 2]
type = PlaySnd
trigger1 = time = 1
value = 40,0
channel = 1

[state 700, 6]
type = changestate
trigger1 = animtime = 0
value = 703
ctrl = 1

;---------------------------------------------------------------------------
; Super Jump Forward
[statedef 703]
physics = a
type = a
ctrl = 1

[State 50, 0]
type = Turn
trigger1 = p2dist X < -5

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 701
trigger1 = Time = 0
value = 701

[state 701, 1]
type = VarSet
trigger1 = time = 0
sysvar(1) = 0

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.17

[state 701, 5]
type = veladd
trigger1 = command = "holdback"
trigger1 = command != "holdfwd"
trigger1 = time >= 0
trigger1 = vel x <= 0
trigger1 = vel x > -2
x = -.07

[state 701, 5]
type = veladd
trigger1 = command = "holdfwd"
trigger1 = command !="holdback"
trigger1 = vel x < 5
trigger1 = time >= 0
x = .11

[state 701, 5]
type = VelSet
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = time >= 0
trigger1 = vel x = 0
x = 0

[State 180, Varset]
type = VarSet
trigger1 = 1
var(8) = 1

[State X, VelSet for Superjump]
type = Null;VarSet
trigger1 = AnimElemNo(0) = 1
fvar(4) = -14

[State X, VelSet for Superjump]
type = Null;VelSet
trigger1 = AnimElemNo(0) != 1
trigger1 = Time = 0
Y = FVar(4)

;---------------------------------------------------------------------------
; Super Jump 3
[statedef 704]
physics = S
type = S
ctrl = 0
anim = 40

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 40
trigger1 = Time = 0
value = 40

[state 700, 1]
type = VarSet
trigger1 = time = 0
sysvar(1) = 0

[state 700, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[state 700, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[state 700, 5]
type = VelSet
trigger1 = (animtime = 0) && (prevstateno = 100) && (sysvar(1) = 1)
x = const(velocity.runjump.fwd.x)

[state 700, 4]
type = VelSet
trigger1 = animtime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -20.5

[State 40, Explod]
type = Explod
trigger1 = animtime = -1
anim = 8250
id = 8250
pos = -130, 0
scale = 0.54,0.48
sprpriority = 4
supermove = 1
ownpal = 1

[state 700, 2]
type = PlaySnd
trigger1 = time = 0
value = 0,2
volumescale = 255

[state 700, 2]
type = PlaySnd
trigger1 = time = 1
value = 40,0
channel = 1

[state 700, 6]
type = changestate
trigger1 = animtime = 0
value = 705
ctrl = 1

;---------------------------------------------------------------------------
; Super Jump Backward
[statedef 705]
physics = a
type = a
ctrl = 1

[State 50, 0]
type = Turn
trigger1 = p2dist X < -5


[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 702
trigger1 = Time = 0
value = 702

[state 701, 1]
type = VarSet
trigger1 = time = 0
sysvar(1) = 0

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.17

[state 701, 5]
type = veladd
trigger1 = command = "holdback"
trigger1 = command != "holdfwd"
trigger1 = time >= 0
trigger1 = vel x <= 0
trigger1 = vel x > -2
x = -.07

[state 701, 5]
type = veladd
trigger1 = command = "holdfwd"
trigger1 = command !="holdback"
trigger1 = vel x < 5
trigger1 = time >= 0
x = .11

[state 701, 5]
type = VelSet
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = time >= 0
trigger1 = vel x = 0
x = 0

[State 180, Varset]
type = VarSet
trigger1 = 1
var(8) = 1

[State X, VelSet for Superjump]
type = Null;VarSet
trigger1 = AnimElemNo(0) = 1
fvar(4) = -14

[State X, VelSet for Superjump]
type = Null;VelSet
trigger1 = AnimElemNo(0) != 1
trigger1 = Time = 0
Y = FVar(4)

;---------------------------------------------------------------------------
; Adv Guard (Stand)
[Statedef 710]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 123
ctrl = 0

[State 708, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 777, 0

[State 550, NotHitBy]
Type = NotHitBy
trigger1 = Time = 0
Value = SCA
Time = 27

[State -2, AhoVOK[h]
type = Explod
trigger1 = time = 0
anim = 8060
pos = 47,-55
ontop = 1
scale = 0.5, 0.5

[State 550, Push Block]
type = Helper
trigger1 = Time = 0
ID = 6600
name = "ADV Guard"
pos = 0,0
postype = p1
stateno = 714
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 550, Push Block]
type = Helper
trigger1 = Time = 0
ID = 6601
name = "ADV Guard"
pos = 0,0
postype = p1
stateno = 713
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 550, Stop]
type = VelSet
trigger1 = Time = [0,30]
x = 0
y = 0

[State 550, Done]
type = ChangeState
trigger1 = AnimTime = 0
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; Guard Push (Crouch)
[Statedef 711]
type    = C
movetype= I
physics = C
velset = 0,0
anim = 124
ctrl = 0

[State 708, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 777, 0

[State 560, NotHitBy]
Type = NotHitBy
trigger1 = Time = 0
Value = SCA
Time = 27

[State -2, AhoVOK[h]
type = Explod
trigger1 = time = 0
anim = 8060
pos = 47,-55
ontop = 1
scale = 0.5, 0.5

[State 550, Push Block]
type = Helper
trigger1 = Time = 0
ID = 6600
name = "ADV Guard"
pos = 0,0
postype = p1
stateno = 714
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 550, Push Block]
type = Helper
trigger1 = Time = 0
ID = 6601
name = "ADV Guard"
pos = 0,0
postype = p1
stateno = 713
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 560, Stop]
type = VelSet
trigger1 = Time = [0,30]
x = 0
y = 0

[State 560, Done]
type = ChangeState
trigger1 = AnimTime = 0
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; Guard Push (Air)
[Statedef 712]
type    = A
movetype= I
physics = A
velset = 0,0
anim = 125
ctrl = 0

[State 708, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 777, 0

[State -2, AhoVOK[h]
type = Explod
trigger1 = time = 0
anim = 8060
pos = 47,-55
ontop = 1
scale = 0.5, 0.5

[State 570, NotHitBy]
Type = NotHitBy
trigger1 = Time = 0
Value = SCA
Time = 27

[State 550, Push Block]
type = Helper
trigger1 = Time = 0
ID = 6600
name = "ADV Guard"
pos = 0,0
postype = p1
stateno = 714
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 550, Push Block]
type = Helper
trigger1 = Time = 0
ID = 6601
name = "ADV Guard"
pos = 0,0
postype = p1
stateno = 713
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 570, Stop]
type = VelSet
trigger1 = Time = [0,30]
x = 0
y = 0

[State 570, Done]
type = ChangeState
trigger1 = AnimTime = 0
value = 132
ctrl = 1

;---------------------------------------------------------------------------
; Guard Push Fwd
[Statedef 713]
type    = A
movetype= I 
physics = N
velset = 0,0
anim = 715

[State 580, Not Get Hit]
type = NotHitBy
Trigger1 = Time >= 0
value = , AA ,AP ,AT
Time = 1

[State 580, Push]
type = PlayerPush
trigger1 = Time >= 0
value = 1

[State 580, Shove]
type = VelSet
trigger1 = Time >= 0
x = 20

[State 580, Done]
type = DestroySelf
trigger1 = Time = 20

;---------------------------------------------------------------------------
; Guard Push Back
[Statedef 714]
type    = A
movetype= I 
physics = N
velset = 0,0
anim = 715

[State 590, Not Get Hit]
type = NotHitBy
Trigger1 = Time >= 0
value = , AA ,AP ,AT
Time = 1

[State 590, Push]
type = PlayerPush
trigger1 = Time >= 0
value = 1

[State 590, Shove]
type = VelSet
trigger1 = Time >= 0
x = -20

[State 590, Done]
type = DestroySelf
trigger1 = Time = 20

;---------------------------------------------------------------------------
; Air Dash Up Fwd
[Statedef 720]
type    = A
physics = A
anim = 721
sprpriority = 1

[State 110, 1]
type = VelSet
trigger1 = time >= 1
x = 7.6
y = -6.5

[State 111, 1]
type = VelSet
trigger1 = time >= 27
x = 0
y = 0

[State 110, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 110, 5]
type = VarSet
trigger1 = Time = 0
var(6) = 1

[State 117, 7]
type = ChangeState
triggerall = var(12) = 0
trigger1 = Animtime = 0
value = 4999
ctrl = ifelse(var(8) = 0,0,1)

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Air Dash Up
[Statedef 721]
type    = A
physics = A
anim = 720
sprpriority = 1

[State 111, 1]
type = VelSet
trigger1 = time >= 1
x = 0
y = -7

[State 111, 1]
type = VelSet
trigger1 = time >= 27
x = 0
y = 0

[State 111, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 111, 5]
type = VarSet
trigger1 = Time = 0
var(6) = 1

[State 117, 7]
type = ChangeState
triggerall = var(12) = 0
trigger1 = Animtime = 0
value = 4999
ctrl = ifelse(var(6) = 0,0,1)

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Air Dash Up Back
[Statedef 722]
type    = A
physics = A
anim = 722
sprpriority = 1

[State 110, 1]
type = VelSet
trigger1 = time >= 1
x = -7.6
y = -6.5

[State 111, 1]
type = VelSet
trigger1 = time >= 27
x = 0
y = 0

[State 112, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 112, 5]
type = VarSet
trigger1 = Time = 0
var(6) = 1

[State 117, 7]
type = ChangeState
triggerall = var(12) = 0
trigger1 = Animtime = 0
value = 4999
ctrl = ifelse(var(8) = 0,0,1)

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Air Dash Back
[Statedef 723]
type    = A
physics = A
anim = 722
sprpriority = 1

[State 113, 1]
type = VelSet
trigger1 = time >= 1
x = -7.4
y = 0

[State 111, 1]
type = VelSet
trigger1 = time >= 27
x = 0
y = 0

[State 113, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 113, 5]
type = VarSet
trigger1 = Time = 0
var(6) = 1

[State 117, 7]
type = ChangeState
triggerall = var(12) = 0
trigger1 = Animtime = 0
value = 4999
ctrl = ifelse(var(8) = 0,0,1)

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Air Dash Down Back
[Statedef 724]
type    = A
physics = A
anim = 722
sprpriority = 1

[State 114, 1.1]
type = VelSet
trigger1 = Pos Y < -5
x = -6
y = 6.5

[State 114, 1.2]
type = VelSet
trigger1 = Pos Y >= -9
x = -5
y = 0

[State 111, 1]
type = VelSet
triggerall = Pos Y >= -255
trigger1 = time >= 27
x = 0
y = 0

[State 114, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 114, 5]
type = VarSet
trigger1 = Time = 0
var(6) = 1

[State 117, 7]
type = ChangeState
triggerall = var(12) = 0
trigger1 = Animtime = 0
value = 4999
ctrl = ifelse(var(8) = 0,0,1)

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Air Dash Down
[Statedef 725]
type    = A
physics = A
anim = 723
sprpriority = 1

[State 115, 1.1]
type = VelSet
trigger1 = Pos Y < -5
x = 0
y = 7

[State 115, 1.2]
type = VelSet
trigger1 = Pos Y >= -8
x = 0
y = 0

[State 111, 1]
type = VelSet
triggerall = Pos Y >= -255
trigger1 = time >= 25
x = 0
y = 0

[State 110, 3]
type = Explod
trigger1 = Time = 0
anim = 724
id = 724
postype = P1
pos = 0, -10
sprpriority = 0
ownpal = 1
removetime = 28
bindtime = -1

[State 115, 5]
type = VarSet
trigger1 = Time = 0
var(6) = 1

[State 117, 7]
type = ChangeState
triggerall = var(12) = 0
trigger1 = Animtime = 0
value = 4999
ctrl = ifelse(var(8) = 0,0,1)

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Air Dash Forward Down
[Statedef 726]
type    = A
physics = A
anim = 721
sprpriority = 1

[State 114, 1.1]
type = VelSet
trigger1 = Pos Y < -5
x = 6
y = 6.5

[State 114, 1.2]
type = VelSet
trigger1 = Pos Y >= -9
x = 5
y = 0

[State 111, 1]
type = VelSet
triggerall = Pos Y >= -255
trigger1 = time >= 27
x = 0
y = 0

[State 116, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 116, 5]
type = VarSet
trigger1 = Time = 0
var(6) = 1

[State 117, 7]
type = ChangeState
triggerall = var(12) = 0
trigger1 = Animtime = 0
value = 4999
ctrl = ifelse(var(8) = 0,0,1)

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Air Dash Forward
[Statedef 727]
type    = A
physics = A
anim = 721
sprpriority = 1

[State 117, 1]
type = VelSet
trigger1 = time >= 1
x = 7.4
y = 0

[State 111, 1]
type = VelSet
trigger1 = time >= 27
x = 0
y = 0


[State 117, 2] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 117, 5]
type = VarSet
trigger1 = Time = 0
var(6) = 1

[State 117, 7]
type = ChangeState
triggerall = var(12) = 0
trigger1 = Animtime = 0
value = 4999
ctrl = ifelse(var(8) = 0,0,1)

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
trigger1 = Animtime = 0
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Fly Mode (Start)
[Statedef 730]
type    = A
physics = A
anim = 730
sprpriority = 1

[State 117, 1]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1000, 2] ;Dust
type = Explod
triggerall = Pos Y >= 0
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 117, 2] ;Prevent from turning
type = Null;AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 110, 3]
type = Null;Explod
trigger1 = Time = 0
anim = 724
id = 724
postype = P1
pos = 0, -10
sprpriority = 0
ownpal = 1
removetime = -1
bindtime = -1

[State 731, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 40, 0
volumescale = 58

[State 117, 7]
type = ChangeState
trigger1 = Animtime = -5
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Fly Mode
[Statedef 731]
type    = A
movetype= I
physics = A
sprpriority = 1

[State 731, Velset]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 731, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAirGuard

[State 731, Varset]
type = VarSet
trigger1 = Time = 0
trigger1 = var(12) = 0
var(12) = 600

[State 117, 1]
type = VarSet
trigger1 = 1
var(13) = 0

[state 731, PosSet]
type = PosSet
trigger1 = StateType = A
trigger1 = pos y > -5
y = -5

[State 731, ChangeAnim]
type = ChangeAnim
triggerall = Anim != 731
trigger1 = Vel X = 0
trigger1 = Vel Y = 0
trigger2 = Vel X = 0
trigger2 = Vel Y > 0
value = 731

[State 731, ChangeAnim]
type = ChangeAnim
triggerall = Anim != 732
triggerall = Vel X > 0
trigger1 = Vel Y = 0
trigger2 = Vel Y != 0
value = 732

[State 731, ChangeAnim]
type = ChangeAnim
triggerall = Anim != 734
trigger1 = Vel X = 0
trigger1 = Vel Y < 0
value = 734

[State 731, ChangeAnim]
type = ChangeAnim
triggerall = Anim != 733
triggerall = Vel X < 0
trigger1 = Vel Y = 0
trigger2 = Vel Y != 0
value = 733

[State 731, VelSet]
type = VelSet
trigger1 = Command != "holdfwd"
trigger1 = Command != "holdback"
trigger1 = Command != "holdup"
trigger1 = Command != "holddown"
x = 0
y = 0

[State 731, VelSet]
type = VelSet
trigger1 = Command = "holdfwd"
trigger1 = Command = "holdup"
trigger1 = Command != "holdback"
trigger1 = Command != "holddown"
x = const(velocity.walk.fwd.x)*(94/50)
y = -4

[State 731, VelSet]
type = VelSet
trigger1 = Command = "holdfwd"
trigger1 = Command = "holddown"
trigger1 = Command != "holdback"
trigger1 = Command != "holdup"
x = const(velocity.walk.fwd.x)*(94/83)
y = ifelse(Pos Y < -5, 3.5, 0)

[State 731, VelSet]
type = VelSet
trigger1 = Command = "holdfwd"
trigger1 = Command != "holdback"
trigger1 = Command != "holdup"
trigger1 = Command != "holddown"
x = const(velocity.walk.fwd.x)*(94/35)
y = 0

[State 731, VelSet]
type = VelSet
trigger1 = Command = "holdup"
trigger1 = Command != "holdfwd"
trigger1 = Command != "holdback"
trigger1 = Command != "holddown"
x = 0
y = -5

[State 731, VelSet]
type = VelSet
trigger1 = Command = "holdback"
trigger1 = Command = "holdup"
trigger1 = Command != "holdfwd"
trigger1 = Command != "holddown"
x = const(velocity.walk.back.x)*(118/50)
y = -5

[State 731, VelSet]
type = VelSet
trigger1 = Command = "holdback"
trigger1 = Command != "holdfwd"
trigger1 = Command != "holdup"
trigger1 = Command != "holddown"
x = const(velocity.walk.back.x)*(118/35)
y = 0

[State 731, VelSet]
type = VelSet
trigger1 = Command = "holdback"
trigger1 = Command = "holddown"
trigger1 = Command != "holdfwd"
trigger1 = Command != "holdup"
x = const(velocity.walk.back.x)*(118/82)
y = ifelse(Pos Y < -5, 3.5, 0)

[State 731, VelSet]
type = VelSet
trigger1 = Command = "holddown"
trigger1 = Command != "holdfwd"
trigger1 = Command != "holdback"
trigger1 = Command != "holdup"
x = 0
y = ifelse(Pos Y < -5, 3.5, 0)

[State 731, Turn]
type = Turn
trigger1 = (enemy,pos x-pos x)*facing < 0


[State 731, PosAdd]
type = PosAdd
trigger1 = P2Dist Y > 130
y = 9

[State 731, Explod]
type = Explod
triggerall = NumExplod(725) = 0
trigger1 = Anim = 731
anim = 724
id = 725
postype = P1
pos = 0, -10
sprpriority = 0
ownpal = 1
removetime = 20
bindtime = -1

[State 731, RemoveExplod]
type = RemoveExplod
trigger1 = Anim != 731
id = 725


[State 731, ChangeState]
type = ChangeState
trigger1 = var(12) <= 0
trigger2 = Command = "Fly"
trigger2 = var(12) > 0
value = 49
ctrl = 1

;---------------------------------------------------------------------------
; Throw - Attempt
; CNS difficulty: medium-advanced
; Description: Throws are not difficult to make, although then can be
;     tedious at times. Throw attempt States have a HitDef of a
;     special format. The key parameters in a throw are p1Stateno
;     and p2Stateno. If the HitDef successfully connects, then
;     the attacker will change to the State number specified by
;     p1Stateno, and the opponent will be change to the State
;     number assigned to p2Stateno. The special thing about p2Stateno
;     is that the opponent will be temporarily brought into the
;     attacker's State file. In this case, no matter who the
;     opponent is, he will be taken to State 820 of this file (kfm.cns)
;     and remain here until the end of the throw (look at his debug
;     information when he is being thrown; the text changes to yellow
;     to mean that he is in another player's State file).
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
VelSet = 0,0
ctrl = 0
anim = 800

; Notes: The '-' symbol in the hitflag field means that it only affects
;   players who are not in a hit State. This prevents the player from combo-ing
;   into the throw. The priority should be set to a low number, such as
;   1 or 2, so that the throw does not take precedence over normal attacks.
;   The type of priority must always be set to "Miss" or "Dodge" for throws,
;   otherwise strange behavior can result.
[State 800, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 6, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1    
hitsound = S5,4      ;No spark
sprpriority = 1       ;Draw in front of p2
p1facing = ifelse (command = "holdback", -1, 1) ;turn if holding Forwards
p2facing = 1
p1Stateno = 810       ;On success, player changes to State 810
p2Stateno = 815       ;If hit, p2 changes to State 820 in player's cns
fall = 1              ;Force p2 into falling down
fall.recover=0
fall.envshake.time = 10
fall.envshake.freq = 100
fall.envshake.ampl = -2

[State 800, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throwing the opponent
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 60

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-90*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 810, Holding fwd?]
type = Null;VarSet
trigger1 = Time = 0
var(2) = command = "holdfwd"

[State 810, Holding back?]
type = VarSet
trigger1 = Time = 0
var(4) = command = "holdback"

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 1
value = 210,0
volumescale = 220

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 8
value = 220,0
volumescale = 220

[State 240, Explod] 
type = Explod
trigger1 = Animelem = 8
anim = 245
pos = 90, -70
scale = .83,1.07 
sprpriority = 3

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 7
value = 500,1	

[State 810, Bind 1]
type = TargetBind
trigger1 = Animelem = 1
pos = 50, 0	

[State 810, Bind 1]
type = TargetBind
trigger1 = Animelem = 2
pos = 50, 0

[State 810, Width 2-11]
type = TargetBind
trigger1 = Animelem = 3
edge = 30,0
pos = 60, 0

[State 810, Bind 2-4]
type = TargetBind
trigger1 = Animelem = 4
pos = 55, 0

[State 810, Bind 5]
type = TargetBind
trigger1 = Animelem = 5
pos = 50, 0

[State 810, Bind 5]
type = TargetBind
trigger1 = Animelem = 6
pos = 15, 0

[State 810, Bind 5]
type = TargetBind
trigger1 = Animelem = 6
pos = 25, 0

[State 810, Bind 5]
type = TargetLifeAdd
trigger1 = Animelem = 7
value = -155

[State 810, holdfwd - Turn Target 6] ;If was holding fwd before, turn target too
type = TargetFacing
trigger1 = var(4)
trigger1 = AnimElem = 1
value = -1

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Thrown by Throw
[Statedef 815]
type    = A
movetype= H
physics = N
VelSet = 0,0

[State 820, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 815

[State 810, VelSet]
type = VelSet
trigger1 = Animelem = 5, >= 0
x = -20
y = -6.7

[State 810, VelSet]
type = VelSet
trigger1 = Animelem = 6, >= 0
y = 1

[State 810, Gravity]
type = VelAdd
trigger1 = Time >= 44
y = 4

[State 855] ;Hit ground
type = selfstate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110 ;Hit ground


;---------------------------------------------------------------------------
; Throw - Attempt
; CNS difficulty: medium-advanced
; Description: Throws are not difficult to make, although then can be
;     tedious at times. Throw attempt States have a HitDef of a
;     special format. The key parameters in a throw are p1Stateno
;     and p2Stateno. If the HitDef successfully connects, then
;     the attacker will change to the State number specified by
;     p1Stateno, and the opponent will be change to the State
;     number assigned to p2Stateno. The special thing about p2Stateno
;     is that the opponent will be temporarily brought into the
;     attacker's State file. In this case, no matter who the
;     opponent is, he will be taken to State 820 of this file (kfm.cns)
;     and remain here until the end of the throw (look at his debug
;     information when he is being thrown; the text changes to yellow
;     to mean that he is in another player's State file).
[Statedef 820]
type    = S
movetype= A
physics = S
juggle  = 0
VelSet = 0,0
ctrl = 0
anim = 800

; Notes: The '-' symbol in the hitflag field means that it only affects
;   players who are not in a hit State. This prevents the player from combo-ing
;   into the throw. The priority should be set to a low number, such as
;   1 or 2, so that the throw does not take precedence over normal attacks.
;   The type of priority must always be set to "Miss" or "Dodge" for throws,
;   otherwise strange behavior can result.
[State 800, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 6, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1          ;No spark
hitsound = S5,4
sprpriority = 1       ;Draw in front of p2
p1facing = ifelse (command = "holdback", -1, 1) ;turn if holding Forwards
p2facing = 1
p1Stateno = 821       ;On success, player changes to State 810
p2Stateno = 825       ;If hit, p2 changes to State 820 in player's cns
fall = 1              ;Force p2 into falling down
fall.recover=0
fall.envshake.time = 10
fall.envshake.freq = 100
fall.envshake.ampl = -2

[State 800, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throwing the opponent
[Statedef 821]
type    = S
movetype= I
physics = S
anim = 820
poweradd = 60

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-90*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 1
value = 210,0
volumescale = 220	

[State 810, Holding fwd?]
type = Null;VarSet
trigger1 = Time = 0
var(2) = command = "holdfwd"

[State 810, Holding back?]
type = VarSet
trigger1 = Time = 0
var(4) = command = "holdback"

[State 810, Bind 1]
type = TargetBind
trigger1 = Animelem = 1
pos = 50, 0	

[State 810, Bind 1]
type = TargetBind
trigger1 = Animelem = 2
pos = 50, 0

[State 810, Width 2-11]
type = TargetBind
trigger1 = Animelem = 3
edge = 30,0
pos = 60, 0

[State 810, Bind 2-4]
type = TargetBind
trigger1 = Animelem = 4
pos = 55, 0

[State 810, Bind 5]
type = TargetBind
trigger1 = Animelem = 5
pos = 50, 0

[State 810, 6]
type = TargetBind
trigger1 = Animelem = 6
pos = 20, 0
time = -1

[State 810, 7]
type = VelSet
trigger1 = Animelem = 6, >=0
x = 9

[State 100, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 6
value = 40,0
volumescale = 83

[State 21280]
type = ScreenBound
trigger1 = 1
value = 0
ignorehitpause = 1

[State 810, 9]
type = Null;ScreenBound
trigger1 = Time > 20
value = 0
movecamera = -60

[State 810, holdfwd - Turn Target 6] ;If was holding fwd before, turn target too
type = TargetFacing
trigger1 = var(4)
trigger1 = AnimElem = 1
value = -1

[state 5100,2]
type = explod
trigger1 = FrontEdgeBodyDist <= 0
trigger2 = Time = 150
anim = 8015
postype = p2
pos = 0, -50
postype = p2
bindtime = 1
facing = -1
removetime = -2
sprpriority = 4
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 5100,2]
type = playsnd
trigger1 = FrontEdgeBodyDist <= 0
trigger2 = Time = 150
persistent = 0
value = 0,8
channel = 4
volume = 255

[State 810, 5]
type = ChangeState
trigger1 = FrontEdgeBodyDist <= 0
trigger2 = Time = 150
value = 822

;---------------------------------------------------------------------------
; Throwing the opponent
[Statedef 822]
type    = S
movetype= A
physics = N
anim = 821
poweradd = 60

[State 810, 6]
type = TargetDrop
trigger1 = (!Time)

[State 240, Explod] 
type = Explod
trigger1 = Animelem = 2
anim = 245
pos = 90, -70
scale = .83,1.07 
sprpriority = 3

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 1
value = 220,0
volumescale = 220

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 2
value = 500,1

[State 810, Bind 5]
type = TargetLifeAdd
trigger1 = Animelem = 1
value = -155

[State 810, Bind 5]
type = VelSet
trigger1 = Time >= 0
x = 0

[State 810, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Thrown by Throw
[Statedef 825]
type    = S
movetype= H
physics = N
VelSet = 0,0

[State 825, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 825

[State 825, 2]
type = ScreenBound
trigger1 = 1
value = 1

[State 825, 7]
type = ChangeState
;trigger1 = BackEdgeBodyDist <= 0
trigger1 = Enemy,StateNo = 822 
trigger2 = Time = 150
value = 826

;---------------------------------------------------------------------------
; Thrown after Wall Hit
[Statedef 826]
type    = S
movetype= H
physics = N
ctrl = 0

[State 820, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 826

[State 826, 1]
type = VelSet
trigger1 = Time = 4
x = -12
y = -12

[State 826, 2]
type = LifeAdd
trigger1 = Time = 0
persistent = 0
value = -125

[State 5100, 5]
type = Veladd
trigger1 = Time > 4
y = 1.1

[State 826, 7]
type = SelfState
trigger1 = Time = 26
value = 5110

;---------------------------------------------------------------------------
; Air Throw Attempt
[statedef 830] 
type = A
movetype = A 
physics = N
ctrl = 0 
anim = 830
velSet = 0,0 

[state 800, 1] 
type = HitDef 
trigger1 = time = 0
attr = A, NT 
hitflag = MA 
priority = 6, miss 
sparkno = -1 
hitsound = S5,4
p1facing = ifelse (command = "holdback", -1, 1) ;turn if holding Forwards
p2facing = 1
p1stateno = 831
p2stateno = 835
fall.damage = 70 
fall.envshake.time = 10
fall.envshake.freq = 100
fall.envshake.ampl = -2

[state 800, 3] 
type = ChangeState
trigger1 = AnimTime = 0 
value = 49
ctrl = 1 

;---------------------------------------------------------------------------
; Throw Success
[statedef 831] 
type = A 
movetype = A 
physics = N 
anim = 831
sprpriority = -1

[State 901, Explod]
type = Explod
trigger1 = time = 1
anim = 8005
pos = ceil(45*const(size.xscale)),ceil(-90*const(size.yscale))
scale = .5,.5
ownpal = 1
ontop = 1

[State 440, SprPriority]
type = SprPriority
trigger1 = Animelem = 6
value = 4

[state 250, 1] 
type = VelSet 
trigger1 = time = 0
x = 0
y = 0

[State 240, Explod] 
type = Explod
trigger1 = Animelem = 6
anim = 836
scale = .83,1.07 
pos = 0,0
sprpriority = 3

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 6
value = 500,1	

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 1
value = 210,0
volumescale = 220

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 6
value = 220,0
volumescale = 220

[State 810, Holding back?]
type = VarSet
trigger1 = Time = 0
var(4) = command = "holdback"

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 20, 0

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 2
pos = 55, -10

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 3
pos = 55, -30

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 4
pos = 70, -20

[State 810, holdfwd - Turn Target 6] ;If was holding fwd before, turn target too
type = TargetFacing
trigger1 = var(4)
trigger1 = AnimElem = 1
value = -1

[State 1140, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Opponent get thrown
[statedef 835] 
type = A 
movetype = H 
physics = N
ctrl = 0 
VelSet = 0,0
sprpriority = 2

[state 820, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 835

[State 826, 1]
type = VelSet
trigger1 = Time = 25
x = -21
y = 28

[state 820, 4] 
type = SelfState 
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110

; Oo 
[Statedef 910]
type    = S
movetype = A
physics = S
anim = 9999
sprpriority = 1
velset = 0,0
ctrl = 0

[State 810, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,1

[State 810, PosSet]
type = PosSet
trigger1 = 1
x = -180 * facing
y = 0

[State 810, VarSet]
type = VarSet
trigger1 = time = 0
var(57) = 0

[State 810, ChangeState]
type = ChangeState
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target,stateno = 5110
value = 100

;---------------------------------------------------------------------------
; Smart Bomb (Short)
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
sprpriority = -1

[State 1000, 2] ;Dust
type = Explod
triggerall = Pos Y >= 0
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 1000 + 1*(Pos Y < 0)
trigger1 = Time = 0
value = 1000 + 1*(Pos Y < 0)

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 10
value = 1000,0
volumescale = 220

[State 200, PosSet]
type = PosSet
trigger1 = Pos Y >= 0
y = 0

[State 200, Velset]
type = VelSet
trigger1 = Pos Y < 0
x = 0
y = 0

[State 200, StateTypeSet]
type = StateTypeSet
triggerall = Time = 0
trigger1 = Pos Y < 0
StateType = A

[State 220, Helper] 
type = Helper
trigger1 = Animelem = 19 && Pos Y < 0
trigger2 = Animelem = 18 && Pos Y >= 0
pos = 45, -80
name = "Smart Bomb"
postype = p1
Stateno = 1006
id = 1000
helpertype = normal
keyctrl = 0
ownpal = 1

[State 220, Helper] 
type = Helper
trigger1 = Animelem = 19 && Pos Y < 0
trigger2 = Animelem = 18 && Pos Y >= 0
pos = -10, -80
name = "Smart Bomb"
postype = p1
Stateno = 1006
id = 1001
helpertype = normal
keyctrl = 0
ownpal = 1

[State 220, 5]
type = ChangeState
triggerall = var(12) = 0
trigger1 = AnimTime = -22
value = ifelse((Pos Y < 0),49,0)
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
triggerall = StateType = A
trigger1 = Animtime = -22
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Smart Bomb (Medium)
[Statedef 1002]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
sprpriority = -1

[State 1000, 2] ;Dust
type = Explod
triggerall = Pos Y >= 0
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 1000 + 1*(Pos Y < 0)
trigger1 = Time = 0
value = 1000 + 1*(Pos Y < 0)

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 10
value = 1000,0
volumescale = 220

[State 200, PosSet]
type = PosSet
trigger1 = Pos Y >= 0
y = 0

[State 200, Velset]
type = VelSet
trigger1 = Pos Y < 0
x = 0
y = 0

[State 200, StateTypeSet]
type = StateTypeSet
triggerall = Time = 0
trigger1 = Pos Y < 0
StateType = A

[State 220, Helper] 
type = Helper
trigger1 = Animelem = 19 && Pos Y < 0
trigger2 = Animelem = 18 && Pos Y >= 0
pos = 45, -80
name = "Smart Bomb"
postype = p1
Stateno = 1006
id = 1002
helpertype = normal
keyctrl = 0
ownpal = 1

[State 220, Helper] 
type = Helper
trigger1 = Animelem = 19 && Pos Y < 0
trigger2 = Animelem = 18 && Pos Y >= 0
pos = -10, -80
name = "Smart Bomb"
postype = p1
Stateno = 1006
id = 1003
helpertype = normal
keyctrl = 0
ownpal = 1

[State 220, 5]
type = ChangeState
triggerall = var(12) = 0
trigger1 = AnimTime = -22
value = ifelse((Pos Y < 0),49,0)
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
triggerall = StateType = A
trigger1 = Animtime = -22
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Smart Bomb (Far)
[Statedef 1004]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
sprpriority = -1

[State 1000, 2] ;Dust
type = Explod
triggerall = Pos Y >= 0
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 1000 + 1*(Pos Y < 0)
trigger1 = Time = 0
value = 1000 + 1*(Pos Y < 0)

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 10
value = 1000,0
volumescale = 220

[State 200, PosSet]
type = PosSet
trigger1 = Pos Y >= 0
y = 0

[State 200, Velset]
type = VelSet
trigger1 = Pos Y < 0
x = 0
y = 0

[State 200, StateTypeSet]
type = StateTypeSet
triggerall = Time = 0
trigger1 = Pos Y < 0
StateType = A

[State 220, Helper] 
type = Helper
trigger1 = Animelem = 19 && Pos Y < 0
trigger2 = Animelem = 18 && Pos Y >= 0
pos = 45, -80
name = "Smart Bomb"
postype = p1
Stateno = 1006
id = 1004
helpertype = normal
keyctrl = 0
ownpal = 1

[State 220, Helper] 
type = Helper
trigger1 = Animelem = 19 && Pos Y < 0
trigger2 = Animelem = 18 && Pos Y >= 0
pos = -10, -80
name = "Smart Bomb"
postype = p1
Stateno = 1006
id = 1005
helpertype = normal
keyctrl = 0
ownpal = 1

[State 220, 5]
type = ChangeState
triggerall = var(12) = 0
trigger1 = AnimTime = -22
value = ifelse((Pos Y < 0),49,0)
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
triggerall = StateType = A
trigger1 = Animtime = -22
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Smart Bomb (Bomb)
[Statedef 1006]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
anim = 1006
sprpriority = 5
ctrl = 0
velset = 0,0
;hitcountpersist = 1

[State 1040, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = root, fvar(0)

[State 1160, 1]
type = AfterImage
trigger1 = Time = 0
palcolor = 256
paladd = 10,10,25
palmul = .65,.65,.75
palinvertall = 0
palbright = 30,30,30
palcontrast = 256, 256, 256
palpostbright = 220,220,220
length = 19
framegap = 4
timegap = 1
trans = none
time = 5000


[State 1160, 2.1]
type = VelAdd
trigger1 = Time > 3
y = 0.22 +(ifelse((IsHelper(1000) = 1 || IsHelper(1002) = 1 || IsHelper(1004) = 1), 0, 0.05))

[State 1160, 2.2]
type = VelSet
trigger1 = IsHelper(1000) = 1
trigger2 = IsHelper(1001) = 1
x = 4.5

[State 1160, 2.3]
type = VelSet
trigger1 = IsHelper(1002) = 1
trigger2 = IsHelper(1003) = 1
x = 6.5

[State 1160, 2.4]
type = VelSet
trigger1 = IsHelper(1004) = 1
trigger2 = IsHelper(1005) = 1
x = 8.5

[State 1005, 3]
type = HitDef
trigger1 = Time = 0
attr = A, SA
hitflag = MAF
animtype = Heavy
damage = 63, 7
guardflag = MA
pausetime = 0,10
priority = 6, Hit
sparkno = S8002
guard.sparkno = S8050
sparkxy = -5, 0
hitsound = S5, 2
guardsound = S6, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -14
guard.velocity = -8
air.type = High
air.velocity = -8, -1
air.hittime = 14 
air.slidetime = 14 
airguard.velocity = -5
palfx.time = 39
palfx.add = 224,64,0
palfx.mul = 256,240,32
palfx.sinadd = 48,16,0,4
palfx.color = 8
yaccel=.93
fall.recovertime= 1
ID = 1

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 1160, 4]
type = Null;NotHitBy
trigger1 = 1
value = SCA, NA, NT, SA, ST, HA, HT
time = 1

[State 1160, 5]
type = HitOverride
trigger1 = 1
attr = SCA, NP, SP, HP
stateno = 1006
time = -1

[State 1160, ChangeState]
type = ChangeState
trigger1 = MoveContact
value = 1007

[State 1160, 7.2]
type = ChangeState
trigger1 = Pos Y >= 0
value = 1008

;---------------------------------------------------------------------------
; Smart Bomb (Explod)
[Statedef 1007]
type    = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1

[State 1000, 3]
type = Explod
trigger1 =  time = 0
anim = 8080
ownpal = 1
sprpriority = 6
scale = 1.6,1.6

[State 1000, 6]
type = PlaySnd
trigger1 = time = 0
value = 6,1
volumescale = 255

[State 1160, Destroyself]
type = Destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; Smart Bomb (Explod)
[Statedef 1008]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 21
ctrl = 0
velset = 0,0
hitcountpersist = 1

[State 1000, 3]
type = Explod
trigger1 =  time = 0
anim = 8080
ownpal = 1
sprpriority = 6
scale = 1.6,1.6

[State 1000, 6]
type = PlaySnd
trigger1 = time = 0
value = 6,1
volumescale = 255


[State 1160, Destroyself]
type = Destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; Unibeam light
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
sprpriority = -1

[State 1000, 2] ;Dust
type = Explod
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 1100 + 5*(Pos Y < 0)
trigger1 = Time = 0
value = 1100 + 5*(Pos Y < 0)

[State 117, 1]
type = VelSet
trigger1 = var(12) > 0
x = 0
y = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1100,0
volumescale = 220

[state 701, 5]
type = PlaySnd
trigger1 = Animelem = 2
value = 1100,1
channel = 1

[state 701, 5]
type = StopSnd
trigger1 = Animelem = 13
channel = 1

[state 701, PosSet]
type = PosSet
trigger1 = Anim = 1100
y = 0

[State 181, 3]
type = Explod
trigger1 = AnimElem = 3
anim = 1101
id = 1101
postype = P1
pos = ifelse(Pos Y < 0,13,10),ifelse(Pos Y < 0,-93,-83)
sprpriority = 0
bindtime = -1

[State 181, 3]
type = Explod
trigger1 = Animelem = 6
anim = 1103
id = 1103
postype = P1
pos = ifelse(Pos Y < 0,13,10),ifelse(Pos Y < 0,-93,-86)
sprpriority = 1
bindtime = -1

[State 1000, Varset]
type = VarSet
trigger1 = P2Dist X = [0, 100]
var(5) = 2

[State 1000, Varset]
type = VarSet
trigger1 = P2Dist X = [101, 190]
var(5) = 1

[State 1040, AttackMulSet]
type = null;AttackMulSet
trigger1 = 1
value = root, fvar(0)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = projhit = 1
value = S5,5
channel = 11
volumescale = 200

[State 200, 1]
type = Projectile
trigger1 = Animelem = 8
attr = A, SP                     
projanim = 1104
projid = 1103
projscale = 1,1
projhits = ifelse(var(5) = 2,6,ifelse(var(5) = 1,4,3))
projremovetime = 17
projmisstime = 1
air.animtype = diagup
offset = ifelse(Pos Y < 0,33,20),ifelse(Pos Y < 0,-100,-90)
accel =  0,ifelse(Statetype = A && Vel Y != 0,.06,0)
damage = 7*ifelse(3*fvar(0)>=1,floor(3*fvar(0)),1),7
animtype = light                 
guardflag = MA                   
hitflag = MAF                    
priority = 7, Dodge                
getpower = 56,28
givepower = 56,0
pausetime = 2, 3              
guard.pausetime = 0, 10
guard.sparkno = -1
sparkno = -1
sparkxy = 120, -100 + floor(p2dist y / 2)                      
guardsound = S6, 0               
ground.type = High               
ground.slidetime = 20             
ground.hittime  = 14             
ground.velocity = -7
guard.velocity = -8         
air.type = Low                  
air.velocity = -5,-9
air.hittime = 14 
air.slidetime = 14 
guard.hittime = 8                
down.velocity = 0,4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.93
fall.recovertime= 1
ID = 1

[State 181, 3]
type = Explod
trigger1 = projhit = 1
postype = P2
pos = 0, -65
sprpriority = 2
scale = 0.5,0.5
anim = 8003
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1

[State 181, 3]
type = Explod
trigger1 = projguarded = 1
postype = P2
pos = 0, -65
sprpriority = 2
anim = 8051
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1
facing = 1

[State 1000, Varset]
type = VarSet
trigger1 = Animtime = 0
var(5) = 0

[State 220, 5]
type = ChangeState
triggerall = var(12) = 0
trigger1 = AnimTime = -3
value = ifelse((Pos Y < 0),49,0)
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
triggerall = StateType = A
trigger1 = Animtime = -5
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Unibeam Medium
[Statedef 1110]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
sprpriority = -1

[State 1000, 2] ;Dust
type = Explod
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 1110 + 5*(Pos Y < 0)
trigger1 = Time = 0
value = 1110 + 5*(Pos Y < 0)

[State 117, 1]
type = VelSet
trigger1 = var(12) > 0
x = 0
y = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1100,0
volumescale = 220

[state 701, 5]
type = PlaySnd
trigger1 = Animelem = 2
value = 1100,1
channel = 1

[state 701, 5]
type = StopSnd
trigger1 = Animelem = 16
channel = 1

[state 701, PosSet]
type = PosSet
trigger1 = Anim = 1100
y = 0

[State 181, 3]
type = Explod
trigger1 = AnimElem = 3
anim = 1101
id = 1101
postype = P1
pos = ifelse(Pos Y < 0,13,10),ifelse(Pos Y < 0,-93,-83)
sprpriority = 0
bindtime = -1

[State 181, 3]
type = Explod
trigger1 = Animelem = 6
anim = 1111
id = 1113
postype = P1
pos = ifelse(Pos Y < 0,13,10),ifelse(Pos Y < 0,-93,-86)
sprpriority = 1
bindtime = -1

[State 1000, Varset]
type = VarSet
trigger1 = P2Dist X = [0, 100]
var(5) = 2

[State 1000, Varset]
type = VarSet
trigger1 = P2Dist X = [101, 190]
var(5) = 1

[State 1040, AttackMulSet]
type = null;AttackMulSet
trigger1 = 1
value = root, fvar(0)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = projhit = 1
value = S5,5
channel = 11
volumescale = 200

[State 200, 1]
type = Projectile
trigger1 = Animelem = 8
attr = A, SP                     
projanim = 1104
projid = 1113
projscale = 1,1
projhits = ifelse(var(5) = 2,6,ifelse(var(5) = 1,5,4))
projremovetime = 20
projmisstime = 1
air.animtype = diagup
offset = ifelse(Pos Y < 0,33,20),ifelse(Pos Y < 0,-100,-90)
accel =  0,ifelse(Statetype = A && Vel Y != 0,.06,0)
damage = 7*ifelse(3*fvar(0)>=1,floor(3*fvar(0)),1),7
animtype = medium                 
guardflag = MA                   
hitflag = MAF                    
priority = 7, Dodge                
getpower = 56,28
givepower = 56,0
pausetime = 2, 3            
guard.pausetime = 0, 10
guard.sparkno = -1
sparkno = -1
sparkxy = 120, -100 + floor(p2dist y / 2)                      
guardsound = S6, 0               
ground.type = High               
ground.slidetime = 20             
ground.hittime  = 14             
ground.velocity = -7
guard.velocity = -8         
air.type = Low                  
air.velocity = -5,-9
air.hittime = 14 
air.slidetime = 14 
guard.hittime = 8                
down.velocity = 0,4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.93
fall.recovertime= 1
ID = 1


[State 181, 3]
type = Explod
trigger1 = projhit = 1
postype = P2
pos = 0, -65
sprpriority = 2
scale = 0.5,0.5
anim = 8003
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1

[State 181, 3]
type = Explod
trigger1 = projguarded = 1
postype = P2
pos = 0, -65
sprpriority = 2
anim = 8051
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1
facing = 1

[State 1000, Varset]
type = VarSet
trigger1 = Animtime = 0
var(5) = 0

[State 220, 5]
type = ChangeState
triggerall = var(12) = 0
trigger1 = AnimTime = -5
value = ifelse((Pos Y < 0),49,0)
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
triggerall = StateType = A
trigger1 = Animtime = -5
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Unibeam Hard
[Statedef 1120]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
sprpriority = -1

[State 1000, 2] ;Dust
type = Explod
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 1120 + 5*(Pos Y < 0)
trigger1 = Time = 0
value = 1120 + 5*(Pos Y < 0)

[State 117, 1]
type = VelSet
trigger1 = var(12) > 0
x = 0
y = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1100,0
volumescale = 220

[state 701, 5]
type = PlaySnd
trigger1 = Animelem = 2
value = 1100,1
channel = 1

[state 701, 5]
type = StopSnd
trigger1 = Animelem = 20
channel = 1

[state 701, PosSet]
type = PosSet
trigger1 = Anim = 1100
y = 0

[State 181, 3]
type = Explod
trigger1 = AnimElem = 3
anim = 1101
id = 1101
postype = P1
pos = ifelse(Pos Y < 0,13,10),ifelse(Pos Y < 0,-93,-83)
sprpriority = 0
bindtime = -1

[State 181, 3]
type = Explod
trigger1 = Animelem = 6
anim = 1121
id = 1123
postype = P1
pos = ifelse(Pos Y < 0,13,10),ifelse(Pos Y < 0,-93,-86)
sprpriority = 1
bindtime = -1

[State 1000, Varset]
type = VarSet
trigger1 = P2Dist X = [0, 100]
var(5) = 2

[State 1000, Varset]
type = VarSet
trigger1 = P2Dist X = [101, 190]
var(5) = 1

[State 1040, AttackMulSet]
type = null;AttackMulSet
trigger1 = 1
value = root, fvar(0)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = projhit = 1
value = S5,5
channel = 11
volumescale = 200

[State 200, 1]
type = Projectile
trigger1 = Animelem = 8
attr = A, SP                     
projanim = 1124
projid = 1123
projscale = 1,1
projhits = ifelse(var(5) = 2,6,ifelse(var(5) = 1,7,6))
projremovetime = 20
projmisstime = 1
air.animtype = diagup
offset = ifelse(Pos Y < 0,33,20),ifelse(Pos Y < 0,-100,-90)
accel =  0,ifelse(Statetype = A && Vel Y != 0,.06,0)
damage = 7*ifelse(3*fvar(0)>=1,floor(3*fvar(0)),1),7
animtype = light                 
guardflag = MA                   
hitflag = MAF                    
priority = 7, Dodge                
getpower = 56,28
givepower = 56,0
pausetime = 2, 3             
guard.pausetime = 0, 10
guard.sparkno = -1
sparkno = -1
sparkxy = 120, -100 + floor(p2dist y / 2)                      
guardsound = S6, 0               
ground.type = low               
ground.slidetime = 20             
ground.hittime  = 14             
ground.velocity = -7
guard.velocity = -8         
air.type = Low                  
air.velocity = -5,-9
air.hittime = 14 
air.slidetime = 14 
guard.hittime = 8                
down.velocity = 0,4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.93
fall.recovertime= 1
ID = 1

[State 181, 3]
type = Explod
trigger1 = projhit = 1
postype = P2
pos = 0, -65
sprpriority = 2
scale = 0.5,0.5
anim = 8003
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1

[State 181, 3]
type = Explod
trigger1 = projguarded = 1
postype = P2
pos = 0, -65
sprpriority = 2
anim = 8051
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1
facing = 1

[State 1000, Varset]
type = VarSet
trigger1 = Animtime = 0
var(5) = 0

[State 220, 5]
type = ChangeState
triggerall = var(12) = 0
trigger1 = AnimTime = -4
value = ifelse((Pos Y < 0),49,0)
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
triggerall = StateType = A
trigger1 = Animtime = -5
value = 731
ctrl = 1


;---------------------------------------------------------------------------
; Shoulder Cannon (missle)
[Statedef 1101]
type    = A
movetype= A
physics = N
juggle  = 6
poweradd= 50
ctrl = 0
anim = 425
hitcountpersist = 1

[state 40, 4]
type = VelSet
trigger1 = Time = 0
x = 7

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, SP
hitflag = MAFD
animtype  = Heavy
damage    = 60
getpower = 30
guardflag = MA
pausetime = 0,8
priority = 4, Hit
sparkno = -1
;guard.sparkno = S6050
sparkxy = -3, -92
hitsound = S250, 0
guardsound = S120, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 15
ground.velocity = -7
guard.velocity = -10
air.type = High
air.velocity = -5,-5
air.hittime = 18
airguard.velocity = -4
ground.cornerpush.veloff  = 0
guard.cornerpush.veloff  = 0

[State 420, 5]
type = ChangeState
trigger1 = FrontEdgeDist<-90 || BackEdgeDist<-90
trigger2 = movecontact
value = 1102

;---------------------------------------------------------------------------
; Missle (Destroy)
[Statedef 1102]
type    = A
juggle  = 4
poweradd = 0
ctrl = 0
anim = 9999
hitcountpersist = 1


[State 1160, Destroyself]
type = Destroyself
trigger1 = time = 0

;---------------------------------------------------------------------------
; Air Unibeam light
[Statedef 1150]
type    = A
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1105
hitcountpersist = 1
sprpriority = -1


[State 200, StateTypeSet]
type = StateTypeSet
triggerall = Time = 0
trigger1 = Pos Y < 0
StateType = A

[state 701, 5]
type = Veladd
trigger1 = Time = 0
trigger1 = StateType = A
y = .8

[state 701, PosSet]
type = PosSet
trigger1 = StateType = A
trigger1 = pos y > -8
y = -8

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1100,0
volumescale = 220

[state 701, 5]
type = PlaySnd
trigger1 = Animelem = 2
value = 1100,1
channel = 1

[state 701, 5]
type = StopSnd
trigger1 = Animelem = 13
channel = 1

[State 181, 3]
type = Explod
trigger1 = AnimElem = 3
anim = 1101
id = 1101
postype = P1
pos = ifelse(Pos Y < 0,13,10),ifelse(Pos Y < 0,-93,-83)
sprpriority = 0
bindtime = -1

[State 181, 3]
type = Explod
trigger1 = Animelem = 6
anim = 1103
id = 1103
postype = P1
pos = ifelse(Pos Y < 0,13,10),ifelse(Pos Y < 0,-93,-86)
sprpriority = 1
bindtime = -1

[State 1000, Varset]
type = VarSet
trigger1 = P2Dist X = [0, 100]
var(5) = 2

[State 1000, Varset]
type = VarSet
trigger1 = P2Dist X = [101, 190]
var(5) = 1

[State 1040, AttackMulSet]
type = null;AttackMulSet
trigger1 = 1
value = root, fvar(0)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = projhit = 1
value = S5,5
channel = 11
volumescale = 200

[State 200, 1]
type = Projectile
trigger1 = Animelem = 8
attr = A, SP                     
projanim = 1104
projid = 1103
projscale = 1,1
projhits = ifelse(var(5) = 2,6,ifelse(var(5) = 1,4,3))
projremovetime = 17
projmisstime = 1
air.animtype = diagup
offset = ifelse(Pos Y < 0,33,20),ifelse(Pos Y < 0,-100,-90)
accel =  0,ifelse(Statetype = A && Vel Y != 0,.06,0)
damage = 7*ifelse(3*fvar(0)>=1,floor(3*fvar(0)),1),7
animtype = light                 
guardflag = MA                   
hitflag = MAF                    
priority = 7, Dodge                
getpower = 56,28
givepower = 56,0
pausetime = 2, 3              
guard.pausetime = 0, 10
guard.sparkno = -1
sparkno = -1
sparkxy = 120, -100 + floor(p2dist y / 2)                      
guardsound = S6, 0               
ground.type = High               
ground.slidetime = 20             
ground.hittime  = 14             
ground.velocity = -7
guard.velocity = -8         
air.type = Low                  
air.velocity = -5,-9
air.hittime = 14 
air.slidetime = 14 
guard.hittime = 8                
down.velocity = 0,4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.93
fall.recovertime= 1

[State 181, 3]
type = Explod
trigger1 = projhit = 1
postype = P2
pos = 0, -65
sprpriority = 2
scale = 0.5,0.5
anim = 8003
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1

[State 181, 3]
type = Explod
trigger1 = projguarded = 1
postype = P2
pos = 0, -65
sprpriority = 2
anim = 8051
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1
facing = 1

[State 1000, Varset]
type = VarSet
trigger1 = Animtime = 0
var(5) = 0

[State 220, 5]
type = ChangeState
triggerall = var(12) = 0
trigger1 = AnimTime = -3
value = ifelse((Pos Y < 0),49,0)
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
triggerall = StateType = A
trigger1 = Animtime = -5
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Air Unibeam Medium
[Statedef 1160]
type    = A
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1115
hitcountpersist = 1
sprpriority = -1

[State 200, StateTypeSet]
type = StateTypeSet
triggerall = Time = 0
trigger1 = Pos Y < 0
StateType = A

[state 701, 5]
type = Veladd
trigger1 = Time = 0
trigger1 = StateType = A
y = .8

[state 701, PosSet]
type = PosSet
trigger1 = StateType = A
trigger1 = pos y > -8
y = -8

[State 117, 1]
type = VelSet
trigger1 = var(12) > 0
x = 0
y = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1100,0
volumescale = 220

[state 701, 5]
type = PlaySnd
trigger1 = Animelem = 2
value = 1100,1
channel = 1

[state 701, 5]
type = StopSnd
trigger1 = Animelem = 16
channel = 1

[State 181, 3]
type = Explod
trigger1 = AnimElem = 3
anim = 1101
id = 1101
postype = P1
pos = ifelse(Pos Y < 0,13,10),ifelse(Pos Y < 0,-93,-83)
sprpriority = 0
bindtime = -1

[State 181, 3]
type = Explod
trigger1 = Animelem = 6
anim = 1111
id = 1113
postype = P1
pos = ifelse(Pos Y < 0,13,10),ifelse(Pos Y < 0,-93,-86)
sprpriority = 1
bindtime = -1

[State 1000, Varset]
type = VarSet
trigger1 = P2Dist X = [0, 100]
var(5) = 2

[State 1000, Varset]
type = VarSet
trigger1 = P2Dist X = [101, 190]
var(5) = 1

[State 1040, AttackMulSet]
type = null;AttackMulSet
trigger1 = 1
value = root, fvar(0)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = projhit = 1
value = S5,5
channel = 11
volumescale = 200

[State 200, 1]
type = Projectile
trigger1 = Animelem = 8
attr = A, SP                     
projanim = 1104
projid = 1113
projscale = 1,1
projhits = ifelse(var(5) = 2,6,ifelse(var(5) = 1,5,4))
projremovetime = 20
projmisstime = 1
air.animtype = diagup
offset = ifelse(Pos Y < 0,33,20),ifelse(Pos Y < 0,-100,-90)
accel =  0,ifelse(Statetype = A && Vel Y != 0,.06,0)
damage = 7*ifelse(3*fvar(0)>=1,floor(3*fvar(0)),1),7
animtype = medium                 
guardflag = MA                   
hitflag = MAF                    
priority = 7, Dodge                
getpower = 56,28
givepower = 56,0
pausetime = 2, 3              
guard.pausetime = 0, 10
guard.sparkno = -1
sparkno = -1
sparkxy = 120, -100 + floor(p2dist y / 2)                      
guardsound = S6, 0               
ground.type = High               
ground.slidetime = 20             
ground.hittime  = 14             
ground.velocity = -7
guard.velocity = -8         
air.type = Low                  
air.velocity = -5,-9
air.hittime = 14 
air.slidetime = 14 
guard.hittime = 8                
down.velocity = 0,4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.93
fall.recovertime= 1

[State 181, 3]
type = Explod
trigger1 = projhit = 1
postype = P2
pos = 0, -65
sprpriority = 2
scale = 0.5,0.5
anim = 8003
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1

[State 181, 3]
type = Explod
trigger1 = projguarded = 1
postype = P2
pos = 0, -65
sprpriority = 2
anim = 8051
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1
facing = 1

[State 1000, Varset]
type = VarSet
trigger1 = Animtime = 0
var(5) = 0

[State 220, 5]
type = ChangeState
triggerall = var(12) = 0
trigger1 = AnimTime = -3
value = ifelse((Pos Y < 0),49,0)
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
triggerall = StateType = A
trigger1 = Animtime = -5
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Air Unibeam Hard
[Statedef 1170]
type    = A
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1125
hitcountpersist = 1
sprpriority = -1

[State 200, StateTypeSet]
type = StateTypeSet
triggerall = Time = 0
trigger1 = Pos Y < 0
StateType = A

[state 701, 5]
type = Veladd
trigger1 = Time = 0
trigger1 = StateType = A
y = .8

[state 701, PosSet]
type = PosSet
trigger1 = StateType = A
trigger1 = pos y > -8
y = -8

[State 117, 1]
type = VelSet
trigger1 = var(12) > 0
x = 0
y = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1100,0
volumescale = 220

[state 701, 5]
type = PlaySnd
trigger1 = Animelem = 2
value = 1100,1
channel = 1

[state 701, 5]
type = StopSnd
trigger1 = Animelem = 21
channel = 1

[State 181, 3]
type = Explod
trigger1 = AnimElem = 3
anim = 1101
id = 1101
postype = P1
pos = ifelse(Pos Y < 0,13,10),ifelse(Pos Y < 0,-93,-83)
sprpriority = 0
bindtime = -1

[State 181, 3]
type = Explod
trigger1 = Animelem = 6
anim = 1121
id = 1123
postype = P1
pos = ifelse(Pos Y < 0,13,10),ifelse(Pos Y < 0,-93,-86)
sprpriority = 1
bindtime = -1

[State 1000, Varset]
type = VarSet
trigger1 = P2Dist X = [0, 100]
var(5) = 2

[State 1000, Varset]
type = VarSet
trigger1 = P2Dist X = [101, 190]
var(5) = 1

[State 1040, AttackMulSet]
type = null;AttackMulSet
trigger1 = 1
value = root, fvar(0)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = projhit = 1
value = S5,5
channel = 11
volumescale = 200

[State 200, 1]
type = Projectile
trigger1 = Animelem = 8
attr = A, SP                     
projanim = 1124
projid = 1123
projscale = 1,1
projhits = ifelse(var(5) = 2,6,ifelse(var(5) = 1,7,6))
projremovetime = 27
projmisstime = 1
air.animtype = diagup
offset = ifelse(Pos Y < 0,33,20),ifelse(Pos Y < 0,-100,-90)
accel =  0,ifelse(Statetype = A && Vel Y != 0,.06,0)
damage = 7*ifelse(3*fvar(0)>=1,floor(3*fvar(0)),1),7
animtype = light                 
guardflag = MA                   
hitflag = MAF                    
priority = 7, Dodge                
getpower = 56,28
givepower = 56,0
pausetime = 2, 3              
guard.pausetime = 0, 10
guard.sparkno = -1
sparkno = -1
sparkxy = 120, -100 + floor(p2dist y / 2)                      
guardsound = S6, 0               
ground.type = low               
ground.slidetime = 20             
ground.hittime  = 14             
ground.velocity = -7
guard.velocity = -8         
air.type = Low                  
air.velocity = -5,-9
air.hittime = 14 
air.slidetime = 14 
guard.hittime = 8                
down.velocity = 0,4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel=.93
fall.recovertime= 1

[State 181, 3]
type = Explod
trigger1 = projhit = 1
postype = P2
pos = 0, -65
sprpriority = 2
scale = 0.5,0.5
anim = 8003
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1

[State 181, 3]
type = Explod
trigger1 = projguarded = 1
postype = P2
pos = 0, -65
sprpriority = 2
anim = 8051
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1
facing = 1

[State 1000, Varset]
type = VarSet
trigger1 = Animtime = 0
var(5) = 0

[State 220, 5]
type = ChangeState
triggerall = var(12) = 0
trigger1 = AnimTime = -3
value = ifelse((Pos Y < 0),49,0)
ctrl = 1

[State 600, 5]
type = ChangeState
triggerall = var(12) > 0
triggerall = StateType = A
trigger1 = Animtime = -5
value = 731
ctrl = 1

;---------------------------------------------------------------------------
; Repulsor Blast Weak
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
sprpriority = 0

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 1200
trigger1 = Time = 0
value = 1200

[State 1000, 2] ;Dust
type = Explod
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1200,0
volumescale = 220

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 11 || Animelem = 22 || Animelem = 33 || Animelem = 45 || Animelem = 56 || Animelem = 67
value = 1200,1	

[State 181, 3]
type = Helper
trigger1 = Animelem = 13
Stateno = 1201
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 181, 3]
type = Helper
trigger1 = Animelem = 21
Stateno = 1202
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 181, 3]
type = Helper
trigger1 = Animelem = 29
Stateno = 1203
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 181, 3]
type = Helper
trigger1 = Animelem = 39
Stateno = 1204
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 220, 5]
type = ChangeState
trigger1 = AnimTime = -16
value = 12
ctrl = 1

;---------------------------------------------------------------------------
; Repulsor Blast Strong
[Statedef 1215]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
sprpriority = 0

[State 1000, 2] ;Dust
type = Explod
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1200,0
volumescale = 220

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 1200
trigger1 = Time = 0
value = 1200

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 11 || Animelem = 22 || Animelem = 33 || Animelem = 45 || Animelem = 56 || Animelem = 67
value = 1200,1	

[State 181, 3]
type = Helper
trigger1 = Animelem = 15
Stateno = 1205
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 181, 3]
type = Helper
trigger1 = Animelem = 24
Stateno = 1206
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 181, 3]
type = Helper
trigger1 = Animelem = 32
Stateno = 1207
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 181, 3]
type = Helper
trigger1 = Animelem = 41
Stateno = 1208
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 220, 5]
type = ChangeState
trigger1 = AnimTime = -13
value = 12
ctrl = 1

;---------------------------------------------------------------------------
; Repulsor Blast Fierce
[Statedef 1220]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
sprpriority = 0

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 1200
trigger1 = Time = 0
value = 1200

[State 1000, 2] ;Dust
type = Explod
trigger1 = Time = 0
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1200,0
volumescale = 220

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 11 || Animelem = 22 || Animelem = 33 || Animelem = 45 || Animelem = 56 || Animelem = 67
value = 1200,1	

[State 181, 3]
type = Helper
trigger1 = Animelem = 17
Stateno = 1209
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 181, 3]
type = Helper
trigger1 = Animelem = 28
Stateno = 1210
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 181, 3]
type = Helper
trigger1 = Animelem = 38
Stateno = 1211
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 181, 3]
type = Helper
trigger1 = Animelem = 48
Stateno = 1212
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 220, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 12
ctrl = 1

;---------------------------------------------------------------------------
; Repulsor Blast Weak 1 (laser)
[Statedef 1201]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
anim = 1201

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, SA
hitflag = MAFD
animtype  = Heavy
damage    = 7*ifelse(9*root,fvar(0)>=1,floor(9*root,fvar(0)),1),7
getpower = 30
guardflag = MA
pausetime = 0,9
priority = 6, Hit
sparkno = S8002
guard.sparkno = S8050
sparkxy = -3, -52
hitsound = S5, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 19
ground.velocity = 7, -11
guard.velocity = -10
air.type = High
air.velocity = 7,-5
air.hittime = 18
yaccel = 0.89
airguard.velocity = -4
ground.cornerpush.veloff  = 0
guard.cornerpush.veloff  = 0
fall = 1
fall.recover=0

[State 1160, Destroyself]
type = Destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; Repulsor Blast Weak 2 (laser)
[Statedef 1202]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
anim = 1202

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, SA
hitflag = MAFD
animtype  = Heavy
damage    = 7*ifelse(9*root,fvar(0)>=1,floor(9*root,fvar(0)),1),7
getpower = 30
guardflag = MA
pausetime = 0,9
priority = 6, Hit
sparkno = S8002
guard.sparkno = S8050
sparkxy = -3, 25
hitsound = S5, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 17
ground.hittime  = 21
ground.velocity = 7, -11
guard.velocity = -10
air.type = High
air.velocity = 7,-5
air.hittime = 18
airguard.velocity = -4
ground.cornerpush.veloff  = 0
guard.cornerpush.veloff  = 0
fall = 1
fall.recover=0
yaccel = 0.89

[State 1160, Destroyself]
type = Destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; Repulsor Blast Weak 3 (laser)
[Statedef 1203]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
anim = 1203

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, SA
hitflag = MAFD
animtype  = Heavy
damage    = 7*ifelse(9*root,fvar(0)>=1,floor(9*root,fvar(0)),1),7
getpower = 30
guardflag = MA
pausetime = 0,9
priority = 4, Hit
sparkno = S8002
guard.sparkno = S8050
sparkxy = -3, 25
hitsound = S5, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 21
ground.velocity = 7, -11
guard.velocity = -10
air.type = High
air.velocity = 7,-5
air.hittime = 18
airguard.velocity = -4
ground.cornerpush.veloff  = 0
guard.cornerpush.veloff  = 0
fall = 1
fall.recover=0
yaccel = 0.89

[State 1160, Destroyself]
type = Destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; Repulsor Blast Weak 4 (laser)
[Statedef 1204]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
anim = 1204

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, SA
hitflag = MAFD
animtype  = Heavy
damage    = 7*ifelse(9*root,fvar(0)>=1,floor(9*root,fvar(0)),1),7
getpower = 30
guardflag = MA
pausetime = 0,9
priority = 4, Hit
sparkno = S8002
guard.sparkno = S8050
sparkxy = -3, -52
hitsound = S5, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = 7, -11
guard.velocity = -10
air.type = High
air.velocity = 7,-5
air.hittime = 18
airguard.velocity = -4
ground.cornerpush.veloff  = 0
guard.cornerpush.veloff  = 0
fall = 1
fall.recover=0
yaccel = 0.89

[State 1160, Destroyself]
type = Destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; Repulsor Blast Strong 1 (laser)
[Statedef 1205]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
anim = 1205

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, SA
hitflag = MAFD
animtype  = Heavy
damage    = 7*ifelse(9*root,fvar(0)>=1,floor(9*root,fvar(0)),1),7
getpower = 30
guardflag = MA
pausetime = 0,9
priority = 6, Hit
sparkno = S8002
guard.sparkno = S8050
sparkxy = -3, -52
hitsound = S5, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 19
ground.velocity = 7, -11
guard.velocity = -10
air.type = High
air.velocity = 7,-5
air.hittime = 18
yaccel = 0.89
airguard.velocity = -4
ground.cornerpush.veloff  = 0
guard.cornerpush.veloff  = 0
fall = 1
fall.recover=0


[State 1160, Destroyself]
type = Destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; Repulsor Blast Strong 2 (laser)
[Statedef 1206]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
anim = 1206

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, SA
hitflag = MAFD
animtype  = Heavy
damage    = 7*ifelse(9*root,fvar(0)>=1,floor(9*root,fvar(0)),1),7
getpower = 30
guardflag = MA
pausetime = 0,9
priority = 6, Hit
sparkno = S8002
guard.sparkno = S8050
sparkxy = -3, 25
hitsound = S5, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 17
ground.hittime  = 21
ground.velocity = 7, -11
guard.velocity = -10
air.type = High
air.velocity = 7,-5
air.hittime = 18
airguard.velocity = -4
ground.cornerpush.veloff  = 0
guard.cornerpush.veloff  = 0
fall = 1
fall.recover=0
yaccel = 0.89


[State 1160, Destroyself]
type = Destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; Repulsor Blast Strong 3 (laser)
[Statedef 1207]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
anim = 1207

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, SA
hitflag = MAFD
animtype  = Heavy
damage    = 7*ifelse(9*root,fvar(0)>=1,floor(9*root,fvar(0)),1),7
getpower = 30
guardflag = MA
pausetime = 0,9
priority = 4, Hit
sparkno = S8002
guard.sparkno = S8050
sparkxy = -3, 25
hitsound = S5, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 21
ground.velocity = 7, -11
guard.velocity = -10
air.type = High
air.velocity = 7,-5
air.hittime = 18
airguard.velocity = -4
ground.cornerpush.veloff  = 0
guard.cornerpush.veloff  = 0
fall = 1
fall.recover=0
yaccel = 0.89

[State 1160, Destroyself]
type = Destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; Repulsor Blast Strong 4 (laser)
[Statedef 1208]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
anim = 1208

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, SA
hitflag = MAFD
animtype  = Heavy
damage    = 7*ifelse(9*root,fvar(0)>=1,floor(9*root,fvar(0)),1),7
getpower = 30
guardflag = MA
pausetime = 0,9
priority = 4, Hit
sparkno = S8002
guard.sparkno = S8050
sparkxy = -3, -52
hitsound = S5, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = 7, -11
guard.velocity = -10
air.type = High
air.velocity = 7,-5
air.hittime = 18
airguard.velocity = -4
ground.cornerpush.veloff  = 0
guard.cornerpush.veloff  = 0
fall = 1
fall.recover=0
yaccel = 0.89


[State 1160, Destroyself]
type = Destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; Repulsor Blast Fierce 1 (laser)
[Statedef 1209]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
anim = 1209

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, SA
hitflag = MAFD
animtype  = Heavy
damage    = 7*ifelse(9*root,fvar(0)>=1,floor(9*root,fvar(0)),1),7
getpower = 30
guardflag = MA
pausetime = 0,9
priority = 6, Hit
sparkno = S8002
guard.sparkno = S8050
sparkxy = -3, -52
hitsound = S5, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 19
ground.velocity = 7, -11
guard.velocity = -10
air.type = High
air.velocity = 7,-5
air.hittime = 18
yaccel = 0.89
airguard.velocity = -4
ground.cornerpush.veloff  = 0
guard.cornerpush.veloff  = 0
fall = 1
fall.recover=0


[State 1160, Destroyself]
type = Destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; Repulsor Blast 2 Fierce (laser)
[Statedef 1210]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
anim = 1210

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, SA
hitflag = MAFD
animtype  = Heavy
damage    = 7*ifelse(9*root,fvar(0)>=1,floor(9*root,fvar(0)),1),7
getpower = 30
guardflag = MA
pausetime = 0,9
priority = 6, Hit
sparkno = S8002
guard.sparkno = S8050
sparkxy = -3, 25
hitsound = S5, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 17
ground.hittime  = 21
ground.velocity = 7, -11
guard.velocity = -10
air.type = High
air.velocity = 7,-5
air.hittime = 18
airguard.velocity = -4
ground.cornerpush.veloff  = 0
guard.cornerpush.veloff  = 0
fall = 1
fall.recover=0
yaccel = 0.89


[State 1160, Destroyself]
type = Destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; Repulsor Blast 3 Fierce (laser)
[Statedef 1211]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
anim = 1211

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, SA
hitflag = MAFD
animtype  = Heavy
damage    = 7*ifelse(9*root,fvar(0)>=1,floor(9*root,fvar(0)),1),7
getpower = 30
guardflag = MA
pausetime = 0,9
priority = 4, Hit
sparkno = S8002
guard.sparkno = S8050
sparkxy = -3, 25
hitsound = S5, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 21
ground.velocity = 7, -11
guard.velocity = -10
air.type = High
air.velocity = 7,-5
air.hittime = 18
airguard.velocity = -4
ground.cornerpush.veloff  = 0
guard.cornerpush.veloff  = 0
fall = 1
fall.recover=0
yaccel = 0.89


[State 1160, Destroyself]
type = Destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; Repulsor Blast 4 Fierce (laser)
[Statedef 1212]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
hitcountpersist = 1
anim = 1212

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, SA
hitflag = MAFD
animtype  = Heavy
damage    = 7*ifelse(9*root,fvar(0)>=1,floor(9*root,fvar(0)),1),7
getpower = 30
guardflag = MA
pausetime = 0,9
priority = 4, Hit
sparkno = S8002
guard.sparkno = S8050
sparkxy = -3, -52
hitsound = S5, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = 7, -11
guard.velocity = -10
air.type = High
air.velocity = 7,-5
air.hittime = 18
airguard.velocity = -4
ground.cornerpush.veloff  = 0
guard.cornerpush.veloff  = 0
fall = 1
fall.recover=0
yaccel = 0.89

[State 1160, Destroyself]
type = Destroyself
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; Proton Cannon
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 10
velset = 0, 0
ctrl = 0
sprpriority = 3
hitcountpersist = 1

[State 3000, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && Anim != 3100
value = 3100

[State 3000, PlaySnd]
type = Playsnd
trigger1 = Animelem = 2
value = 3100,0
volumescale = 220

[State 3000, Explod]
type = Explod
trigger1 = time = 1
anim = 8300
id = 8300
supermove = 1
sprpriority = 4
ownpal = 1

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 13
var(29) = 1

[State 3000, Helper]
type = Helper
trigger1 = animelem = 13
stateno = 8500
supermovetime = 99999999
pos = ceil(100*const(size.xscale)),ceil(-92*const(size.yscale))
ownpal = 1
id = 8500

[State 3000, SuperPause]
type = SuperPause
trigger1 = animelem = 13
time = 36
movetime = 36
darken = 1
anim = -1
p2defmul = 1
poweradd = -1000

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = animelem = 13,< 0
value = SCA

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, HA
hitflag = MAFD
animtype  = Heavy
damage    = 7*ifelse(5*fvar(0)>=1,floor(5*fvar(0)),1),14
guardflag = MA
pausetime = 0,5
priority = 4, Hit
sparkno = S8002
guard.sparkno = S8050
sparkxy = -3, -92
hitsound = S5, 2
guardsound = S6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 30
ground.velocity = -9,-14
guard.velocity = -5
air.type = High
air.velocity = -8,-8.5
air.hittime = 18
airguard.velocity = 4
fall = 1
fall.recover = 0
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
getpower = 0, 0
yaccel= 1.4

[State 220, Helper] 
type = Helper
trigger1 = Animelem = 1
pos = 0, -143
Stateno = 3101
postype = p1
;removetime = -1
removetime = 34
sprpriority = 1

[state 3000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3102
ctrl = 1

;---------------------------------------------------------------------------
; Proton Cannon (cannon)
[Statedef 3101]
type    = S
physics = N
juggle  = 10
velset = 0, 0
ctrl = 0
sprpriority = 4
anim = 3101
poweradd = 0

[State 440, Velset]
type = VelSet
trigger1 = Animelem >= 1
x = 0
y = 0

[State 440, Velset]
type = VelAdd
trigger1 = Animelem = 14
y = 0.4

[State 440, Velset]
type = VelAdd
trigger1 = Animelem = 15
y = 3.5

[State 0, SprPriority]
type = SprPriority
trigger1 = Animelem = 16
value = 1

[state 1900, AssertSpecial]
type = Null;AssertSpecial
trigger1 = 1
flag = NoShadow

[state 3000, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = Parent, MoveType = H
trigger2 = Parent, StateNo != 9000
ignorehitpause = 0

;---------------------------------------------------------------------------
; Proton Cannon (holding the cannon)
[Statedef 3102]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0, 0
ctrl = 0
sprpriority = -1

[State 3000, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && Anim != 3102
value = 3102

[State 3000, PlaySnd]
type = Playsnd
trigger1 = Animelem = 1
value = 3000,2
volumescale = 190

[State 0, SprPriority]
type = SprPriority
trigger1 = Animelem >= 1
value = -1
ignorehitpause = 1

[State 250, 3]
type = HitDef
trigger1 = Time = 0
attr = S, HA
hitflag = MAFD
animtype  = Heavy
damage    = 9*ifelse(5*fvar(0)>=1,floor(5*fvar(0)),1),3
guardflag = MA
pausetime = 0,0
sprpriority = -1
priority = 4, Hit
sparkno = S8003
guard.sparkno = S8050
sparkxy = -3, -92
hitsound = S5, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 30
ground.velocity = -12,-5
guard.velocity = -5
air.type = High
air.velocity = -12,-5.5
air.hittime = 18
airguard.velocity = 4
fall = 1
fall.recover = 0
ground.cornerpush.veloff = -22
getpower = 0, 0
yaccel= 1.4

[State 220, Helper] 
type = Helper
trigger1 = Animelem = 2
pos = 92, -5
Stateno = 3103
sprpriority = 3
removeongethit = 1

[State 181, 3]
type = Null;Explod
trigger1 = ProjContact3105 = 1
postype = P2
pos = -40, -60
sprpriority = 5
bindtime = -1
anim = 1150
removetime = 8
ontop = 1

[state 3000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3104
ctrl = 1

;---------------------------------------------------------------------------
; Proton Cannon (beam)
[Statedef 3103]
type    = S
movetype= A
physics = S
juggle  = 10
velset = 0, 0
ctrl = 0
sprpriority = 17
anim = 3103
poweradd = 0

[State 0, SprPriority]
type = SprPriority
trigger1 = Animelem >= 1
value = 15

[State 220, BindToParent] 
type = BindToParent
trigger1 = Time = 0
pos = 78, -3
time = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit = 1
value = S5,5
channel = 12
volumescale = 130
freqmul = 51.0
pan = 5
;abspan = 


[State 200, 1]
type = HitDef
triggerall = var(30) != 29
trigger1 = Time % 4 = 0
attr = S, HA                   
damage = 5*ifelse(3*root,fvar(0)>=1,floor(3*root,fvar(0)),1),2
animtype = Heavy                 
guardflag = MA                   
hitflag = MAF                    
priority = 5, Dodge                
pausetime = 0, 0           
guard.pausetime = 0, 10
guard.sparkno = S9999
sparkno = -1
sparkxy = 0,0                               
guardsound = S6, 0               
ground.type = High               
ground.slidetime = 20             
ground.hittime  = 18             
ground.velocity = -10, -5         
air.type = Low                  
air.velocity = -10,-6
air.hittime = 12                 
down.velocity = 0,4
fall = 1
fall.recover=0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
ignorehitpause = 1
p2stateno = 3110
removeongethit = 1
getpower = 0, 0

[State 200, VarAdd]
type = ParentVarAdd
trigger1 = HitCount = 1
var(51) = 1
ignorehitpause = 1
persistent = 0

[State 181, 3]
type = Explod
trigger1 = movehit = 1
postype = P2
pos = 0, -75
sprpriority = 2
scale = 0.5,0.5
anim = 8003
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1

[State 181, 3]
type = Explod
trigger1 = moveguarded = 1
postype = P2
pos = 0, -75
sprpriority = 2
anim = 8051
bindtime = 1
removetime = 14
supermovetime = 30
ontop = 1
ownpal = 1
facing = 1

[state 3000, DestroySelf]
type = VarAdd
trigger1 = MoveContact = 1
var(30) = 1

[state 3000, DestroySelf]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = var(30) = 29
trigger3 = Parent, StateNo != 3102
value = 3108

;---------------------------------------------------------------------------
; Hit by Proton Cannon
[Statedef 3110]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 225, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 3110
ignorehitpause = 99999

[State 10210, Turn]
type = Turn
trigger1 = !Time && !(p2dist X < 0 && facing != enemyNear, facing) && (facing = enemyNear, facing)
value = 1

[State 10210, VelSet]
type = VelSet
trigger1 = time = 1
x = 0
y = 0

[State 10210, ChangeAnim]
type = ChangeAnim
triggerall = ((enemyNear, StateNo = 3000) && (enemyNear, AnimElem = 33, >= 0)) || ((enemyNear, StateNo = 3050) && (enemyNear, AnimElem = 30, >= 0)) || ((enemyNear, StateNo != 3000) && (enemyNear, StateNo != 3050))
trigger1 = Time > 6
value = 5050

[State 10210, Gravity]
type = Gravity
triggerall = ((enemyNear, StateNo = 3000) && (enemyNear, AnimElem = 33, >= 0)) || ((enemyNear, StateNo = 3050) && (enemyNear, AnimElem = 30, >= 0)) || ((enemyNear, StateNo != 3000) && (enemyNear, StateNo != 3050))
trigger1 = Time > 6

[State 10210, VelSet]
type = VelSet
triggerall = ((enemyNear, StateNo = 3000) && (enemyNear, AnimElem = 33, >= 0)) || ((enemyNear, StateNo = 3050) && (enemyNear, AnimElem = 30, >= 0)) || ((enemyNear, StateNo != 3000) && (enemyNear, StateNo != 3050))
trigger1 = Time > 6
trigger1 = Alive
x = -7
y = -9.7
persistent = 0

[State 10210, VelSet]
type = VelSet
triggerall = ((enemyNear, StateNo = 3000) && (enemyNear, AnimElem = 33, >= 0)) || ((enemyNear, StateNo = 3050) && (enemyNear, AnimElem = 30, >= 0)) || ((enemyNear, StateNo != 3000) && (enemyNear, StateNo != 3050))
trigger1 = Time > 6
trigger1 = !alive
x = -7
y = -9.7
persistent = 0

[State 9910, VelAdd]
type = VelAdd
trigger1 = Time > 16
y = 3.89

[State 10210, SelfState]
type = SelfState
trigger1 = Time > 16
value = 5050

;---------------------------------------------------------------------------
; Proton Cannon (finish)
[Statedef 3104]
type    = S
movetype= A
physics = S
juggle  = 10
velset = 0, 0
ctrl = 0
sprpriority = 0
poweradd = 0

[State 3000, VarSet]
type = VarSet
trigger1 = time = 1
var(29) = 0

[State 3000, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && Anim != 3104
value = 3104

[State 220, Helper] 
type = Helper
trigger1 = Time = 0
pos = 0,-110
Stateno = 3106
removetime = -2
sprpriority = 3

[state 3000, ChangeState]
type = ChangeState
trigger1 = AnimTime = -8
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Proton Cannon (cannon destroy)
[Statedef 3106]
type    = S
movetype= A
physics = S
juggle  = 10
velset = 0, 0
ctrl = 0
sprpriority = 3
anim = 3106
poweradd = 0

[State 440, Velset]
type = VelAdd
trigger1 = Animelem = 12
y = -.5

[state 3000, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Proton Cannon (cannon destroy)
[Statedef 3108]
type    = S
movetype= A
physics = S
juggle  = 10
velset = 0, 0
ctrl = 0
sprpriority = 3
anim = 3107

[state 3000, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;--------------------------------------------------------------------------

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
triggerall = palno >= 7
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -7

[State 40, 5]
type = VelSet
triggerall = palno >= 7
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = 3

[State 40, 4]
type = VelSet
triggerall = palno <= 6
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
triggerall = palno <= 6
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 49]
type    = A
physics = A
ctrl = ifelse(var(8) = 1,1,0)

[State 50, 0]
type = Turn
trigger1 = p2dist X < -5

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Anim != 49
trigger1 = Time = 0
value = 49

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.19

[State 40, 4]
type = VelSet
trigger1 = Time = 0
trigger1 = PrevStateNo = [720, 732]
x = 0

[state 701, 5]
type = veladd
trigger1 = command = "holdback"
trigger1 = command != "holdfwd"
trigger1 = time >= 0
x = -.08

[state 701, 5]
type = veladd
trigger1 = command = "holdfwd"
trigger1 = command !="holdback"
x = .15

[State 195, Varset]
type = VarSet
trigger1 = Time > 0
var(12) = 0

[State 50, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52
ctrl = 1

[State 130, Stop Guarding]
type = ChangeState
triggerall = var(8) = 0
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 132

;---------------------------------------------------------------------------
; Jump air dash
[Statedef 4999]
type    = A
physics = A
ctrl = ifelse(var(6) = 1,1,0)

[State 50, 0]
type = Turn
trigger1 = p2dist X < -5


[State 50, 2]
type = ChangeAnim
trigger1 = Anim != 49
trigger1 = Time = 0
value = 49

[State 50, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52
ctrl = 1

[State 130, Stop Guarding]
type = ChangeState
triggerall = var(8) = 0
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 132


;---------------------------------------------------------------------------
; Dash
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1
;ctrl = 0

[state 700, 2]
type = PlaySnd
trigger1 = time = 1
value = 40,0
channel = 1

[state 100, Sound effect]
type = playsnd
trigger1 = time = 0
value = 0,1
volumescale = 44

[State 100, 6]
type = Explod
trigger1 = time % 5 = 0
anim = 8100
ownpal = 1
sprpriority = 4
random = 30,abs(const(size.head.pos.y))
pos = -20,ceil(const(size.head.pos.y)/2)
scale = 0.5, 0.5

[State 100, 1]
type = VelSet
trigger1 = 1; Time = 0
x = const(velocity.run.fwd.x)

[State 100, 1]
type = VelSet
trigger1 = animelem = 19
x = 0

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 101]
type = ChangeState
trigger1 = AnimTime = 0
value = 102

[Statedef 102] 
type    = S
physics = S
anim = 0
sprpriority = 1

[State 102, ChangeState]
type = ChangeState
trigger1 =1
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dash In
[Statedef 101]
type    = S
physics = S
anim = 100
sprpriority = 1

[State 101, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 40, 0

[State 101, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 101, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 101]
type = ChangeState
trigger1 = AnimTime = 0
value = 102

;---------------------------------------------------------------------------
; Dash Back
[Statedef 105]
type    = S
physics = S
anim = 105
sprpriority = 1

[state 700, 2]
type = PlaySnd
trigger1 = time = 1
value = 40,0
channel = 1

[State 105, 1]
type = VelSet
trigger1 = 1 ;Time = 0
x = const(velocity.run.back.x)

[State 105, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 105, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 1]
type = VelSet
trigger1 = animelem = 16
x = 0

[State 101]
type = ChangeState
trigger1 = AnimTime = 0
value = 102

;---------------------------------------------------------------------------
; Dizzy Up
[Statedef 5250]
type    = A
movetype= H
physics = N
ctrl = 0
anim = 5252
poweradd = 0
velset = -3, -17
sprpriority = 1

[State 970, 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 20

;This resets the dizzy counter back to zero
[State 970, 3]
type = VarSet
trigger1 = Time = 0
v = 35
value = 0

[State 5250, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5250, Gravity]
type = VelAdd
trigger1 = 1
y = 0.3

[State 91, VelAdd]
type = VelAdd
trigger1 = Vel Y > 0
y= - 0.17

[State 5250, recavary]
type = ChangeState
trigger1 = time = 32
value = 5200
ctrl = 1
;===============================================================
;
[Statedef 5429]
type = A
physics = N
movetype = H
anim = 5012
velset = 0,0
face2p = 1

[State 3]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 1]
type = varset
trigger1 = Time = 0
sysvar(3) = gethitvar(hittime)

[State NHBC]
type = NotHitBy
trigger1 = 1;
value = ,AT
time = 1

[State 0]
type = changeanim
trigger1 = HitShakeOver
trigger1 = selfanimexist(5051)
value = 5051

[State pos]
type = posset
trigger1 = pos y > -10
y = -10

[State 6]
type = ChangeState
trigger1 = HitShakeOver
value = 5430

[Statedef 5430]
type = A
physics = N
movetype = H

[State 0]
type = changeanim
trigger1 = time = 0
trigger1 = anim != 5051
value = 5050

[State 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 0]
type = NotHitBy
trigger1 = time = 0
value = SCA,NT,ST,HT
time = 25

[State 0]
type = HitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP
time = 25

[State 0]
type = veladd
trigger1 = 1
y = 0.75

[State 0]
type = changeanim
trigger1 = time = 28
trigger1 = selfanimexist(5061)
value = 5061

[State 0]
type = changeanim
trigger1 = time = 28
trigger1 = !selfanimexist(5061)
trigger1 = selfanimexist(5060)
value = 5060

[state down]
type = varset
trigger1 = time >= 30
sysvar(4) = 0

[State 0]
type = selfstate
trigger1 = time >= sysvar(3)
value = 5040

[State Debug Display]
type = DisplayToClipboard
trigger1 = 1
text = "hittime:%d,vel y:%f"
params = gethitvar(hittime),vel y
ignorehitpause = 1


[Statedef 5435];(GA~b^-on
type = A
physics = N
movetype = H

[State 0]
type = posset
trigger1 = 1
y = -1

[State 0]
type = changestate
trigger1 = 1
value = 5431

[Statedef 5431];GA@
type = U
physics = N
movetype = H
velset = 0,0

[State 0]
type = changestate
trigger1 = pos y = 0
trigger2 = statetype != A
value = ifelse(statetype = L,499,299)

[State 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 0] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 3]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 4]
type = posfreeze
trigger1 = 1

[State 6]
type = ChangeState
trigger1 = HitShakeOver
value = 5432

[Statedef 5432];
type = U
physics = N
movetype = H

[State 1]
type = statetypeset
trigger1 = Time = 0
trigger1 = pos y < 0
trigger2 =  vel y < 0
statetype = A

[State 4]
type = hitvelset
trigger1 = time = 0
trigger1 = prevstateno != 289
x = 1
y = 1

[State 2]
type = VelSet
trigger1 = time = 0
trigger1 = prevstateno != 289
x = vel x / (0.54+const(movement.yaccel))
y = vel y / (0.54+const(movement.yaccel))

[State 2]
type = VelAdd
trigger1 = time > 0
y = GetHitVar(yaccel)

[State 2]
type = changeanim
trigger1 = vel y < -3.0
trigger1 = anim != 5030
value = 5030

[State 2]
type = changeanim
trigger1 = vel y = [-3.0,-0.3)
trigger1 = anim != 5050
trigger1 = selfanimexist(5060)
value = 5050

[State 2]
type = changeanim
trigger1 = vel y > -0.3
trigger1 = selfanimexist(5060)
trigger1 = anim != [5060,5061]
value = 5060

[State 2]
type = changeanim
trigger1 = vel y > -0.3
trigger1 = selfanimexist(5061)
trigger1 = anim != [5060,5061]
value = 5061

[State F]
type = Changestate
trigger1 = pos y >= 0
trigger1 = vel y >= 0
value = 5433

[Statedef 5433];hit ground
type = L
physics = N
movetype = H
ctrl = 0

[State 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 0]
type = FallEnvShake
trigger1 = Time = 0

[State 0]
type = ChangeAnim
trigger1 = time = 0
value = 5100

[State 0]
type = ChangeAnim
trigger1 = animtime = 0
trigger1 = anim = 5100
value = 5110

[State 0]
type = PosSet
trigger1 = Time >= 0
y = 0

[State 0];N 
type = selfState
trigger1 = gethitvar(fall.recovertime) = 1
trigger1 = time = 1
value = 5120

[State 0];N 
type = selfState
trigger1 = Time = 16
value = 5120

[State 0]
type = GameMakeAnim
trigger1 = Time = 1
;value = 61
;pos = 0, 0
;under = 1
value = 60 + (sysvar(4) > 5) + (sysvar(4) > 14)
pos = 0, 0
under = sysvar(4) <= 10

[State 0]
type = PosFreeze
trigger1 = 1

[State 0]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

[State 0] ;If just died
type = selfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = sysvar(3) ;sysvar(3) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

;-----------------------------------------------------
;s
[Statedef 161616]
type = A
physics = N
movetype = H
ctrl = 0

[State 0,anim]
type = ChangeAnim
trigger1 = time = 0
value = 5050

[State 0,vel]
type = velset
trigger1 = time = 0
y  = -15

[State 0,type]
type = statetypeset
trigger1 = time = 3
physics = A

[State 0,type]
type = NotHitBy
trigger1 = time >= 0
value = SCA,AP,AA,AT,HP,HA,HT,NT,NA,NP,SA,SP,ST
time = 20

[State 0,vel]
type = selfstate
trigger1 =pos y >= 0
trigger1 = vel y >= -3
value  = 0
ctrl = 1


;=========================================
;VY(o

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[Statedef 15150]
anim = 5110
type = L
movetype = H
ctrl = 0

[State 0]
type = HitBy
trigger1 = time >= 0
value = SCA
time = 1

;---------------------------------------------------------------------------
;JE^[
;---------------------------------------------------------------------------
[statedef 2222]
type = S
movetype = A
physics = N
juggle = 5
velset = 0,0
ctrl = 0



[State 1400,G]
type = nothitby
trigger1 = time=0
time=36
value = SCA


[state 3100, SuperPause] 
type = SuperPause 
trigger1 = time = 0  
time = 20 
poweradd = -1000



[state 4500, ReverseDef] 
type = ReversalDef 
trigger1 = Anim = 150
reversal.attr = SCA, AA, AP, AT, NA, NP, NT, SA, SP, ST, HA, HP, HT 
pausetime = 20,0 
sparkxy = 20,-50 
hitflag = MA
priority = 1 
sparkno = -1 
p2facing = 1 
p2getp1state = 1 

[State 1100, 0]
type = ChangeAnim
trigger1 = Anim != 1200
trigger1 = Time = 0
value = 1200

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1200,0

[State 220, Explod] 
type = Explod
trigger1 = Time = 0
pos = 0, 0
postype = p1
scale = 1, 1
sprpriority = 3
anim = 6003

[State 200, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 11 || Animelem = 22 || Animelem = 33 || Animelem = 45 || Animelem = 56 || Animelem = 67
value = 1200,1	

[State 181, 3]
type = Helper
trigger1 = Animelem = 15
Stateno = 1205
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 181, 3]
type = Helper
trigger1 = Animelem = 24
Stateno = 1206
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 181, 3]
type = Helper
trigger1 = Animelem = 32
Stateno = 1207
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 181, 3]
type = Helper
trigger1 = Animelem = 41
Stateno = 1208
postype = P1
pos = 0, -120
sprpriority = -1
bindtime = -1

[State 220, 5]
type = ChangeState
trigger1 = AnimTime = -7
value = 12
ctrl = 1

; nGtFNg 
[Statedef 8200]
type = A
movetype = H
physics = N
anim = 9999

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
scale = 2,2
pos = 16,0
vel = 4,0
sprpriority = 4
ownpal = 1

[State 8200, Explod]
type = Explod
trigger1 = time = 0
anim = 8200
pos = -16,0
vel = -4,0
scale = 2,2
sprpriority = 4
ownpal = 1

[State 8200, DestroySelf]
type = DestroySelf
trigger1 = time = 0

; X[p[R{o(wp[) 

;Lv 1 Hyper Helper
[Statedef 8500] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8500, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,0
volumescale = 190

[State 8500, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 8500, EnvColor]
type = EnvColor
trigger1 = time < 37
value = 0,0,0
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8500
id = 8500
bindtime = -1
removetime = -1
ontop = 1
supermove = 1
ownpal = 1
scale = 1.1,1.1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = 8900
sprpriority = -1
pos = 0,120
postype = back
under = 1
supermove = 1
bindtime = 6
removetime = 37
vel = -0.09,0
scale = 1,1
ID = 8900
ownpal = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 0
anim = f9951
sprpriority = -2
postype = left
under = 1
supermove = 1
bindtime = -1
removetime = 37
scale = 1,1
ownpal = 1


[State 9999,0]
type = ModifyExplod
trigger1 = time = [0,6]
ID = 8900
scale = .75- (.0415*time), .75- (.0415*time)
sprpriority = -1
under = 1

[State 8500, Explod]
type = Explod
trigger1 = time = 37
trigger2 = time > 37 && root,var(29) = 1 && !numexplod(8505)
anim = 8505
id = 8505
postype = left
bindtime = -1
removetime = -1
scale = .5,.5*fvar(1)
sprpriority = -3
ownpal = 1

[State 0, Explod]
type = ModifyExplod
trigger1 = numexplod(8505)
ID = 8505
scale = .5,.5*fvar(1)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = ifelse(screenpos y-212<0,0,screenpos y-212)

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(1) = 1+(fvar(0)/512)

[State 8500, RemoveExplod]
type = RemoveExplod
trigger1 = root,var(29) = 0 || root,var(29) = 2
trigger2 = root,movetype = H
trigger3 = time >= 37 && roundstate > 2
id = 8505

[State 8500, ChangeState]
type = ChangeState
triggerall = root,winko
trigger1 = time >= 37 && roundstate > 2
value = 8510

[State 8500, DestroySelf]
type = DestroySelf
trigger1 = root,var(29) = 0
trigger2 = root,movetype = H

[Statedef 8510] 
type = A
physics = N
anim = 9999
velset = 0,0
ctrl = 0

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,4

[State 8510, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1,5

[State 8510, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nofg
flag2 = nobardisplay
flag3 = nomusic

; [State 8510, AssertSpecial]
; type = AssertSpecial
; trigger1 = (StageVar(Info.Name) != "Absolute Cloud-Night")
; flag = nomusic

[State 8510, Explod]
type = Explod
trigger1 = time = 0
anim = 8510
id = 8510
postype = left
bindtime = -1
sprpriority = -3
ownpal = 1

[State 8510, DestroySelf]
type = DestroySelf
trigger1 = !numexplod(8510)
 
; HIT_FALLRECOVER (on the ground) 
[Statedef 5201]
type    = C
movetype= H
physics = N
anim = ifelse(prevstateno=5200,5200,5201)
facep2 = 1
sprpriority = -1

[State 5201, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 731, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 40, 0
volumescale = 158

[State 5201, VelSet]
type = VelSet
trigger1 = time = 0
x = ifelse(anim=5200,8,-7)
y = 0

[State 5201, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, PlayerPush]
type = PlayerPush
trigger1 = anim = 5200
value = 0

[State 5201, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
 

; VXep 
	
; ^[QbgJo[ 
[Statedef 9900]
type = A
movetype = H
physics = N

[State 9900, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5040,5050)

 
; ^[Qbg_EA 
[Statedef 9901]
type = A
movetype = H
physics = N

[State 9901, SelfState]
type = SelfState
trigger1 = 1
value = ifelse(alive,5201,5050)

 
; ^[QbgoEh 
[Statedef 9910]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 9910, SelfState]
type = SelfState
trigger1 = !alive
value = 5050

[State 9910, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5040

[State 9910, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 9910, VelSet]
type = VelSet
trigger1 = time = 0
x = -6
y = -6

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 9910, NotHitBy]
type = NotHitBy
trigger1 = pos y >= 0 && vel y > 0
value = SCA
time = 3

[State 9910, VelAdd]
type = VelAdd
trigger1 = 1
y = .82;gethitvar(yaccel)

[State 9910, SelfState]
type = SelfState
trigger1 = pos y >= 0 && vel y > 0
value = 52

; PRE-WALKING
[Statedef 22]
type    = S
physics = S
sprpriority = 0

[State 20, VelSet]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, VelSet]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, VelMul]
type = VelMul
trigger1 = var(48) = 1
x = 1.7

[State 20, ChangeAnim]
type = ChangeAnim
trigger1 = vel x > 0 &&  anim != 22
value = 22

[State 20, ChangeAnim]
type = ChangeAnim
trigger1 = vel x < 0 &&  anim != 23
value = 23
 

[Statedef -2]

[State 0, PlaySnd]
type = PlaySnd
trigger1 = StateNo = 9910 && time = 1
value = 0,7
channel = 20

[State -2, effect for custom state #9910]
type = Explod
trigger1	= NumEnemy && Enemy, StateNo = 9910  && !NumExplod(8010)
persistent = 0
ID = 8010
anim = 8010
postype = p2
pos = -20, 10
scale = 0.8,0.8
sprpriority = 5
ownpal = 1
removetime = -2
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = StateNo = 228 && time = 1
value = 0,7
channel = 18

[State -2, effect for custom state #9910]
type = Explod
trigger1	= NumEnemy && Enemy, StateNo = 228  && !NumExplod(8010)
persistent = 0
ID = 8010
anim = 8010
postype = p2
pos = -20, 10
scale = 0.8,0.8
sprpriority = 5
ownpal = 1
removetime = -2
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = StateNo = 458 && time = 1
value = 0,7
channel = 19

[State -2, effect for custom state #9910]
type = Explod
trigger1	= NumEnemy && Enemy, StateNo = 458  && !NumExplod(8010)
persistent = 0
ID = 8010
anim = 8010
postype = p2
pos = -20, 10
scale = 0.8,0.8
sprpriority = 5
ownpal = 1
removetime = -2
ignorehitpause = 1

[State Debug Display]
type = DisplayToClipboard
trigger1 = 1
text = "v17:%d,posY:%d,vely:%f"
params = backedgedist,frontedgedist,vel y
ignorehitpause = 1

; R{bZ[W 
; 1P
[State -2, R{bZ[W]
type = Explod
triggerall = !numexplod(8570)
triggerall = !numtarget && roundstate = 2 && teamside = 1
trigger1 = var(18) >= 3 && var(19) < 2
anim = 8550+(var(18)>3)+(var(18)>5)+(var(18)>7)+(var(18)>9)+(var(18)>29)+(var(18)>59)+(var(18)>99)
ownpal = 1
ontop = 1
postype = left
bindtime = -1
pos = 0,80
scale = .5,.5
ignorehitpause = 1
supermove = 1
pausemovetime = 99999999
id = 8550

[State -2, R{bZ[W]
type = Explod
triggerall = !numexplod(8570)
triggerall = !numtarget && roundstate = 2 && teamside = 1
trigger1 = var(18) >= 3 && var(19) >= 2
anim = 8558+(var(40)=2)
ownpal = 1
ontop = 1
postype = left
bindtime = -1
pos = 0,80
scale = .5,.5
ignorehitpause = 1
supermove = 1
pausemovetime = 99999999
id = 8550

; 2P
[State -2, R{bZ[W]
type = Explod
triggerall = !numexplod(8570)
triggerall = !numtarget && roundstate = 2 && teamside = 2
trigger1 = var(18) >= 3 && var(19) < 2
anim = 8560+(var(18)>3)+(var(18)>5)+(var(18)>7)+(var(18)>9)+(var(18)>29)+(var(18)>59)+(var(18)>99)
ownpal = 1
ontop = 1
postype = right
bindtime = -1
pos = 0,80
scale = .5,.5
ignorehitpause = 1
supermove = 1
pausemovetime = 99999999
id = 8550

[State -2, R{bZ[W]
type = Explod
triggerall = !numexplod(8570)
triggerall = !numtarget && roundstate = 2 && teamside = 2
trigger1 = var(18) >= 3 && var(19) >= 2
anim = 8568+(var(40)=2)
ownpal = 1
ontop = 1
postype = right
bindtime = -1
pos = 0,80
scale = .5,.5
ignorehitpause = 1
supermove = 1
pausemovetime = 99999999
id = 8550

; AiEX
[State -2, R{bZ[W]
type = PlaySnd
triggerall = !numtarget && roundstate = 2
trigger1 = var(18) >= 3 && var(19) < 2
value = 2,(var(18)>3)+(var(18)>5)+(var(18)>7)+(var(18)>9)+(var(18)>29)+(var(18)>59)+(var(18)>99)
ignorehitpause = 1
volumescale = 180

[State -2, R{bZ[W]
type = PlaySnd
triggerall = !numtarget && roundstate = 2
trigger1 = var(18) >= 3 && var(19) >= 2
value = 2,8+(var(40)=2)
ignorehitpause = 1
volumescale = 180
 
; VXebZ[W 
[State -2, VXebZ[W]
type = Explod
triggerall = !(var(14)&1) && teamside = 1
trigger1 = movehit
trigger2 = projhittime(0) > 0
anim = 8570
ownpal = 1
ontop = 1
postype = left
bindtime = -1
pos = 0,80
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8570

[State -2, VXebZ[W]
type = Explod
triggerall = !(var(14)&1) && teamside = 2
trigger1 = movehit
trigger2 = projhittime(0) > 0
anim = 8575
ownpal = 1
ontop = 1
postype = right
bindtime = -1
pos = 0,80
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8570

[State -2, VXebZ[W]
type = PlaySnd
triggerall = !(var(14)&1)
trigger1 = movehit
trigger2 = projhittime(0) > 0
value = 2,10
ignorehitpause = 1
volumescale = 180

[State -2, VXebZ[W]
type = VarSet
triggerall = !(var(14)&1)
trigger1 = movehit
trigger2 = projhittime(0) > 0
trigger3 = movetype = H && stateno != [120,155]
trigger4 = numpartner
trigger4 = partner,movetype = H && partner,stateno != [120,155]
trigger5 = numpartner
trigger5 = partner,movehit || partner,projhittime(0) > 0
var(14) = var(14) | 1
ignorehitpause = 1

[State -2, VXebZ[W]
type = Explod
triggerall = !(var(14)&2) && teamside = 1
trigger1 = life < lifemax * .35
anim = 8571
ownpal = 1
ontop = 1
postype = left
bindtime = -1
pos = 0,80
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8570

[State -2, VXebZ[W]
type = Explod
triggerall = !(var(14)&2) && teamside = 2 && alive
trigger1 = life < lifemax * .35
anim = 8576
ownpal = 1
ontop = 1
postype = right
bindtime = -1
pos = 0,80
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8570

[State -2, VXebZ[W]
type = PlaySnd
triggerall = !(var(14)&2) && alive
trigger1 = life < lifemax * .35
value = 2,11
ignorehitpause = 1
volumescale = 180

[State -2, VXebZ[W]
type = VarSet
triggerall = !(var(14)&2)
trigger1 = life < lifemax * .35
var(14) = var(14) | 2
ignorehitpause = 1

[State -2, VXebZ[W]
type = VarSet
triggerall = (var(14)&2)
trigger1 = life >= lifemax * .35
var(14) = var(14) ^ 2
ignorehitpause = 1

[State -2, VXebZ[W]
type = RemoveExplod
trigger1 = numexplod(8570) && numexplod(8550)
id = 8550
ignorehitpause = 1

; R{ 
[State -2, R{]
type = VarSet
trigger1 = statetype = A && prevstateno = [600,800)
trigger1 = stateno = [1000,5000)
var(17) = 1

[State -2, R{]
type = VarAdd
trigger1 = movehit = 1
trigger2 = projhit = 1
var(18) = 1

[State -2, R{]
type = VarAdd
triggerall = statetype = A && numtarget
triggerall = target,statetype = A
triggerall = movehit = 1 || projhit = 1
trigger1 = stateno = [600,800)
trigger2 = var(17) && stateno = [1000,5000)
var(19) = 1

[State -2, R{]
type = VarSet
trigger1 = !numtarget
var(17) = 0

[State -2, R{]
type = VarSet
trigger1 = !numtarget
var(18) = 0

[State -2, R{]
type = VarSet
trigger1 = !numtarget
var(19) = 0
 
; R{ 
[State -2, R{]
type = VarSet
trigger1 = 1
fvar(5) = 1.0-(var(18)>3)*((var(18)-3)*.075)

[State -2, R{]
type = VarSet
trigger1 = fvar(5) < .0
fvar(5) = .025

[State -2, R{]
type = AttackMulSet
trigger1 = 1
value = fvar(5)

[State -3]
type = ChangeState
triggerall = hitshakeover
trigger1 = (stateno = 5000 || stateno = 5010 || stateno = 5020 || stateno = 5070 || stateno = 5080)
trigger1 = !Alive || !Life
value = 5090

[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate = 2
trigger1 = roundstate != 3
trigger1 = NumHelper(19999997) = 0
stateno = 19999997
id = 19999997

;KO Sound
[State -3]
type = Helper
triggerall = !alive
trigger1 = roundstate != 2
trigger1 = roundstate = 3
trigger1 = NumHelper(19999998) = 0
stateno = 19999998
id = 19999998

[State -2, Remember the last Position (X)]
type = VarSet
triggerall = RoundState < 2
trigger1 = stateno = [0, 21] ;Enable after Intro
fvar(3) = Pos X

[State -2, Set the actual Position when match begins]
type = PosSet
trigger1 = RoundState = 2
trigger1 = fvar(3) != 0
trigger1 = prevstateno != 191
x = fvar(3)

[State -2, Reset PlaceHolder Var]
type = VarSet
trigger1 = RoundState = 2
fvar(3) = 0

[State -2, Pre-walking state]
type = ChangeState
;triggerall = !var(59)
trigger1 = prevstateno = 191
trigger2 = RoundNo != 1              ;Enable If Round Number is > 1
trigger2 = RoundState = 1           ;RoundState < 2 and
trigger2 = stateno = 0              ;Current state is 0
value = 21
ctrl = 0

; GA~b^[A 
[State 650, GA~b^[A]
type = PlaySnd
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
value = 0,11

[State 620, GA~b^[A]
type = VarSet
triggerall = numtarget
trigger1 = movehit = 1 && (target,gethitvar(chainid)&64)
trigger2 = projhit = 1 && (target,gethitvar(chainid)&64)
var(49) = 2

[State -2, GA~b^[A]
type = VarSet
trigger1 = !numtarget
var(49) = 0

[State -2, GA~b^[A]
type = VarSet
trigger1 = var(49)= 2 && ctrl && statetype != A
var(49) = 3

[State -2, GA~b^[A]
type = ScreenBound
trigger1 = var(49) = 2
trigger1 = pos x*facing < 0
value = 0
movecamera = 0,0
ignorehitpause = 1

[State -2, GA~b^[A]
type = ChangeState
triggerall = var(49) = 2
trigger1 = backedgebodydist < -20 && stateno != 100 && stateno != [910,911]
value = 910

[State -2, GA~b^[A]
type = ScreenBound
trigger1 = stateno = 100 && prevstateno = 910
value = 0
movecamera = 0,0

[State -2, GA~b^[A]
type = NotHitBy
trigger1 = stateno = 100 && prevstateno = 910
value = SCA

; _[W 
[State -2, _[W]
type = VarSet
trigger1 = movetype = H
var(57) = 0

[State -2, _[W]
type = AfterImage
trigger1 = movetype = H
time = 0

; wp[A 
[State -2, wp[A]
type = VarSet
trigger1 = !numhelper
var(57) = 0

; ^[Qbg 
[State -2, ^[Qbg]
type = VarSet
trigger1 = 1
var(50) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget
var(50) = target,id
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = !numtarget
var(52) = 0
ignorehitpause = 1

[State -2, ^[Qbg]
type = VarSet
trigger1 = numtarget && hitpausetime
var(52) = target,stateno = 5080
ignorehitpause = 1

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(50)) && !var(52)
trigger1 = playerID(var(50)),gethitvar(chainid) & 1
trigger1 = playerID(var(50)),stateno != [120,155]
trigger1 = playerID(var(50)),hitover && playerID(var(50)),alive && playerID(var(50)),hitshakeover
trigger1 = playerID(var(50)),statetype = A && playerID(var(50)),stateno != 9900
value = 9900

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(50)) && var(52)
trigger1 = playerID(var(50)),alive && playerID(var(50)),hitshakeover
trigger1 = playerID(var(50)),pos y >= 0 && playerID(var(50)),vel y > 0
trigger1 = playerID(var(50)),statetype = A && playerID(var(50)),stateno != 5201 && playerID(var(50)),stateno != 9910
value = 9901

[State -2, ^[Qbg]
type = TargetState
trigger1 = playeridexist(var(50))
trigger1 = playerID(var(50)),gethitvar(chainid) & 2
trigger1 = playerID(var(50)),stateno != [120,155]
trigger1 = playerID(var(50)),alive && playerID(var(50)),hitshakeover
trigger1 = playerID(var(50)),pos y >= 0 && playerID(var(50)),vel y > 0
trigger1 = playerID(var(50)),statetype = A && playerID(var(50)),stateno != 9910
value = 9910


;---------------------------------------------------------------------------

;Wall Hit

[state 5100,2]
type = explod
triggerall = var(44)
triggerall = enemynear,stateno != [120,159]
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist <= 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
anim = 8015
postype = p2
pos = 0, -50
postype = p2
bindtime = 1
facing = -1
removetime = -2
sprpriority = 4
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 5100,2]
type = playsnd
triggerall = var(44)
triggerall = numenemy
triggerall = enemynear,stateno != [120,159]
trigger1 = stateno != 4003
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
persistent = 0
value = 0,8
channel = 4
volume = 255

[state 200, 3]
type = varset
triggerall = var(44)
triggerall = numenemy
trigger1 = enemynear,movetype = h
trigger1 = enemynear,backedgedist < 5
trigger1 = enemynear,statetype = a
trigger1 = enemynear,vel x < 0
v = 44
value = 0

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 24
value = var(23)

[state -3, 2];combo hosei
type = varset
trigger1 = 1
v = 23
value = var(25)+hitcount

[state -3, 2];combo hosei
type = varset
trigger1 = enemynear,movetype != H
v = 25
value = 0

;***************
[state -3, 2];combo
type = varset
trigger1 = var(23)>var(24)
v = 44
value = 1

[state 250,11]
type = helper
trigger1 = p2stateno = 328
trigger1 = !numhelper(60120)
persistent = 0
stateno = 60120
ID = 60120
bindtime = 1
postype = p2
pos = 0,500 

; -[ R{"]-
[State -2]
type = VarSet
trigger1 = P2MoveType != H ;&& P2Statetype != L
;trigger1 = P2Statetype != L
var(51) = 0
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) = 0
fvar(0) = 1 
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) > 0
trigger1 = var(51) <= 4
fvar(0) = .99 
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) = 4
fvar(0) = .91 
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) = 5
fvar(0) = .85 
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) = 6
fvar(0) = .8
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) = 7
fvar(0) = .73 
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) = 8
fvar(0) = .5 
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) = 9
fvar(0) = .42 
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) = 10
fvar(0) = .35 
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) = 11
fvar(0) = .3 
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) = 12
fvar(0) = .23 
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) = 13
fvar(0) = .16 
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) = 14
fvar(0) = .13
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) = 15
fvar(0) = .05
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(51) >= 16
fvar(0) = .02
ignorehitpause = 1


[State -2]
type = RemoveExplod 
trigger1 = StateNo != 9000
trigger1 = StateNo != 610
id = 610

[State -2]
type = RemoveExplod 
trigger1 = StateNo != 9000
trigger1 = StateNo != 620
id = 620

[State -2]
type = RemoveExplod 
trigger1 = StateNo != 9000
trigger1 = StateNo != 621
id = 626

[State -2]
type = RemoveExplod 
trigger1 = StateNo != 9000
trigger1 = StateNo != 622
id = 627

[State -2]
type = RemoveExplod 
trigger1 = StateNo = 3100
id = 1101

[State -2]
type = RemoveExplod 
trigger1 = StateNo = 3100
id = 1113

[State -2]
type = RemoveExplod 
trigger1 = StateNo = 3100
id = 1123

[State -2]
type = RemoveExplod 
trigger1 = StateNo = 3100
id = 1103

[state 701, 5]
type = StopSnd
trigger1 = StateNo = 3100
channel = 1

[State 0, StopSnd]
type = StopSnd
trigger1 = StateNo != 9000
trigger1 = StateNo != 620
channel = 7

[State 0, StopSnd]
type = StopSnd
trigger1 = StateNo != 9000
trigger1 = StateNo != 610
channel = 8

[State 0, StopSnd]
type = StopSnd
trigger1 = StateNo != 9000
trigger1 = StateNo != 621
channel = 9

[State 0, StopSnd]
type = StopSnd
trigger1 = StateNo != 9000
trigger1 = StateNo != 622
channel = 10

[State -2]
type = RemoveExplod
trigger1 = StateNo != [1000,1004]
id = 705

[State -2]
type = RemoveExplod
trigger1 = StateNo != [720,728]
id = 724

;[State -2]
;type = RemoveExplod
;trigger1 = StateNo != 731
;id = 725

[State -2]
type = RemoveExplod
trigger1 = StateNo != [600,655]
id = 726

[State -2]
type = RemoveExplod
trigger1 = StateNo = [5000,5300]
trigger2 = StateNo != 3000 && StateNo != 9000
id = 3005

[State -2]
type = RemoveExplod
trigger1 = StateNo = [5000,5300]
trigger2 = StateNo != 3000 && StateNo != 9000
id = 3201

[State -2]
type = RemoveExplod
trigger1 = StateNo = [5000,5300]
trigger2 = StateNo != 3102 && StateNo != 9000
id = 3202

[State -2]
type = VarSet
trigger1 = StateNo != 9000
trigger1 = Var(1) != 5150
var(1) = StateNo
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = StateNo != 9000
var(3) = AnimElemNo(0)
ignorehitpause = 1

[State -2]
type = VarSet
;trigger1 = Time = 0
trigger1 = StateNo != 9000
var(9) = Facing
ignorehitpause = 1

[State -2]
type = CtrlSet
trigger1 = StateNo = [1000,3999]
value = 0
ignorehitpause = 1

[State -2]
type = AssertSpecial
triggerall = StateNo != [0,49]
trigger1 = Anim = 5
trigger2 = Anim = 6
flag = noautoturn
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = StateNo != 9000
fvar(4) = Vel Y

[State -2]
type = HitOverride
triggerall = StateType != A
trigger1 = 1
trigger1 = palno >= 7
attr = SCA, NA, NP, SA, SP, HA, HP
stateno = 9000
time = 1
ignorehitpause = 1

[State -2]
type = HitOverride
triggerall = StateType = A
trigger1 = 1
trigger1 = palno >= 7
attr = SCA, NA, NP, SA, SP, HA, HP
stateno = 9001
time = 1
ignorehitpause = 1

[State -2]
type = AssertSpecial
trigger1 = 1
trigger1 = palno >= 7
flag = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard 

[State -2]
type = VarSet
trigger1 = StateNo != [5000,5300]
var(10) = 0

[State -2]
type = VarSet
trigger1 = StateNo = [5000,5300]
var(10) = 1

[State -2]
type = VarAdd
trigger1 = var(12) > 0
var(12) = -1
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = StateNo = [5000,5300]
var(12) = 0

[State -2]
type = VarSet
trigger1 = StateNo != 9000
fv = 4
value = Vel X

[State -2]
type = VarSet
trigger1 = StateNo != 9000
fv = 4 + 1
value = Vel Y


[State -2]
type = VarSet
trigger1 = stateno = 50
trigger2 = stateno = 49
var(6) = 0
ignorehitpause = 1


[State -2]
type = DefenceMulSet
trigger1 = Life = [125,250]
value = 0.75

[State -2]
type = DefenceMulSet
trigger1 = Life = [0,124]
value = 0.62

; O\() 
	
; vC[\ 
[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = screenpos y < 0
anim = 8589+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; \(]) 
[State -2, O\]
type = Explod
triggerall = roundstate = [2,3]
triggerall = !numexplod(8596) && numenemy
triggerall = screenpos y > 240-const(size.head.pos.y)
trigger1 = var(20) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(20) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8595+teamside
ownpal = 1
ontop = 1
facing = -var(20)
postype = left
pos = floor(screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8596

[State -2, O\]
type = Explod
triggerall =roundstate = [2,3]
triggerall = !numexplod(8598) && numenemy
triggerall = screenpos y < 0
trigger1 = var(20) = 1
trigger1 = screenpos x < enemynear,screenpos x
trigger2 = var(20) = -1
trigger2 = screenpos x > enemynear,screenpos x
anim = 8597+teamside
ownpal = 1
ontop = 1
facing = -var(20)
postype = left
pos = floor(screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8598

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(8596)
trigger1 = screenpos y <= 220-const(size.head.pos.y)
id = 8596

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(8598)
trigger1 = screenpos y >= 0
id = 8598

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(8596)
id = 8596
postype = left
pos = floor(screenpos x),195

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(8598)
id = 8598
postype = left
pos = floor(screenpos x),5

[State -2, O\]
type = VarSet
trigger1 = numenemy
var(20) = ifelse(screenpos x - enemynear,screenpos x < 0,-1,1)
 
; \ 
[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8596)
trigger1 = screenpos y > 240-const(size.head.pos.y)
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),195
scale = .25,.25
facing = -var(20)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

[State -2, O\]
type = Explod
trigger1 = roundstate = [2,3]
trigger1 = !numexplod(8598)
trigger1 = screenpos y < 0
anim = 8593+teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(screenpos x),5
scale = .25,.25
facing = -var(20)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8594

  
; O\() 
	
; vC[\ 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = enemy,screenpos y < 0
anim = 8589+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .5,.5
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 8590
 
; \(]) 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = var(42) && roundstate = [2,3]
triggerall = !numexplod(18596)
triggerall = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
trigger1 = var(21) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(21) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8595+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(21)
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18596

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
triggerall = var(42) && roundstate = [2,3]
triggerall = !numexplod(18598)
triggerall = enemy,screenpos y < 0
trigger1 = var(21) = 1
trigger1 = enemy,screenpos x < screenpos x
trigger2 = var(21) = -1
trigger2 = enemy,screenpos x > screenpos x
anim = 8597+enemy,teamside
ownpal = 1
ontop = 1
facing = -var(21)
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18598

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(18596)
trigger1 = enemy,screenpos y <= 220-enemy,const(size.head.pos.y)
id = 18596

[State -2, O\]
type = RemoveExplod
triggerall = numexplod(18598)
trigger1 = enemy,screenpos y >= 0
id = 18598

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(18596)
id = 18596
postype = left
pos = floor(enemy,screenpos x),195

[State -2, O\]
type = ModifyExplod
trigger1 = numexplod(18598)
id = 18598
postype = left
pos = floor(enemy,screenpos x),5

[State -2, O\]
type = VarSet
trigger1 = numenemy = 1
var(21) = ifelse(enemy,screenpos x - screenpos x < 0,-1,1)
 
; \ 
[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = !numexplod(18596)
trigger1 = enemy,screenpos y > 240-enemy,const(size.head.pos.y)
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),195
scale = .25,.25
facing = -var(21)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

[State -2, O\]
type = Explod
triggerall = numenemy = 1
triggerall = !(enemy,authorname="mouser" && enemy,var(5)=5068355)
trigger1 = var(42) && roundstate = [2,3]
trigger1 = !numexplod(18598)
trigger1 = enemy,screenpos y < 0
anim = 8593+enemy,teamside
ownpal = 1
ontop = 1
postype = left
pos = floor(enemy,screenpos x),5
scale = .25,.25
facing = -var(21)
supermove = 1
pausemovetime = 99999999
ignorehitpause = 1
id = 18594

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

[State -3]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = 5120
trigger2 = StateNo = [720,730]
trigger3 = StateNo = 645
value = 40, 0

[State -3, Save StateNo]
type = VarSet
trigger1 = (MoveType != H) && (StateNo != 9000)
var(32) = StateNo

[State -3, Save Ctrl]
type = VarSet
trigger1 = (MoveType != H) && (StateNo != 9000)
var(33) = Ctrl

; _[W{CX 
[State 1120, _[W{CX]
type = PlaySnd
triggerall = alive && movetype = H
triggerall = random % 10 < 5
trigger1 = stateno = 5000 && time = 1
trigger2 = stateno = 5010 && time = 1
trigger3 = stateno = 5020 && time = 1
trigger4 = stateno = 5070 && time = 1
trigger5 = stateno = 5080 && time = 1
value = s5000,random%2
channel = 2

[State 0, StopSnd]
type = StopSnd
trigger1 =  !alive
channel =2
;ignorehitpau
[State -3, _[W{CX]
type = PlaySnd
triggerall = movetype = H
trigger1 = stateno = 5000 && time = 0
trigger2 = stateno = 5010 && time = 0
trigger3 = stateno = 5020 && time = 0
trigger4 = stateno = 5070 && time = 0
trigger5 = stateno = 5080 && time = 0
trigger6 = stateno = 226 && time = 0
trigger7 = stateno = 3110 && time = 0
value = 12,(gethitvar(animtype)>=1)+0
channel = 5
volumescale = 170

[State 0, PlaySnd]
type = PlaySnd
trigger1 = StateNo = 150 || stateno = 152 || stateno = 154
trigger1 = time = 0
value = 12,10

;----------------------------------------------------------------------------------------;
;                                        Dizzy code                                      ;
;----------------------------------------------------------------------------------------;
[State -3, Varadd]
type = VarAdd
triggerall = (Time = 0) && (Var(36) < 15) && (Var(37) = 0)
trigger1 = (anim = 5000) || (anim = 5001) || (anim = 5010) || (anim = 5011) || (anim = 5020) || (anim = 5021)
v = 35
value = ((GetHitVar(animtype)=0)*100)+((GetHitVar(animtype)=1)*200)+((GetHitVar(animtype)=2)*250)+((GetHitVar(animtype)>=3)*300)

[State -3, VarSubtract]
type = VarAdd
trigger1 = Var(35) > 0
v = 35
value = ifelse(MoveType = A,-3,-2)

[State -3, VarSet]
type = VarSet
trigger1 = Var(35) < 0
v = 35
value = 0
ignorehitpause = 1

[State -3, ChangeState]
type = ChangeState
triggerall = Time = 1
trigger1 = (anim = 5000) || (anim = 5001) || (anim = 5010) || (anim = 5011) || (anim = 5020) || (anim = 5021)
trigger1 = (Var(35) >=20000) && (LoseKO = 0)
value = 5250
ignorehitpause = 1


